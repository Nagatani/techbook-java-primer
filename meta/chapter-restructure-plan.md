# 章立て見直し計画

## 現状の問題点

### ページ数膨張の原因
- H1（#）見出し: 125個 → 各章で改ページ
- H2（##）見出し: 444個 → 各節で改ページ
- 合計569回の強制改ページが発生

### 特に問題のある章
1. **chapter16-multithreading.md**: 54個の見出し（内容の重複あり）
2. **chapter17-gui-basics.md**: 53個の見出し
3. **chapter18-gui-event-handling.md**: 41個の見出し
4. **chapter22-build-and-deploy.md**: 34個の見出し

## 改善方針

### 1. CSS改ページ制御の調整（実施済み）
- H1: `break-before: recto` → `break-before: page`（左右問わず改ページ）
- H2: `break-before: verso` → 削除（改ページしない）
- H2の上マージンを増やして視覚的な区切りを確保

### 2. 見出しレベルの使い分け指針

#### H1（#）の使用基準
- 章の開始のみに使用
- 各ファイルで1つだけ（最初の章タイトル）

#### H2（##）の使用基準
- 章内の主要セクション（2-5個程度）
- 学習目標、章の構成、主要コンテンツ区分など

#### H3（###）の使用基準
- H2内のサブセクション
- 細かい内容の区切りに使用
- 改ページなしで視覚的な区切りを提供

#### H4-H6の使用基準
- さらに細かい項目分けに使用
- 定義、例、注意点などの小見出し

### 3. 具体的な修正方針

#### chapter16（マルチスレッド）の修正案
現状：
- 重複した内容（20.1-20.4が2回出現）
- 過度に細分化された見出し

修正案：
```markdown
# 第16章 マルチスレッドプログラミング

## 本章の学習目標
### 前提知識
### 学習目標

## マルチスレッドプログラミングの基礎
### なぜマルチスレッドが必要か
### スレッドとプロセスの違い
### Javaにおけるスレッドの実装

## スレッドの作成と実行
### Threadクラスの使用
### Runnableインターフェースの使用
### スレッドのライフサイクル

## 共有リソースと同期制御
### 競合状態の理解
### synchronizedキーワード
### volatileキーワード

## Executorフレームワーク
### ExecutorServiceの基本
### スレッドプールの活用
### FutureとCallable
### CompletableFuture

## 並行コレクションと高度な同期
### ConcurrentHashMap
### BlockingQueue
### Lockインターフェース
### その他の同期プリミティブ

## 実践的な並行処理パターン
### プロデューサー・コンシューマーパターン
### ForkJoinフレームワーク
### 並列ストリーム

## 章末演習
```

#### 見出し削減の方針
1. 重複内容の統合
2. 過度に細分化された見出しをH3以下に降格
3. 関連する内容をまとめて1つのセクションに

### 4. 実装スケジュール

1. **Phase 1**: CSS改ページ制御の調整（完了）
2. **Phase 2**: 最も問題のある章（16, 17, 18, 22）の見出し構造改善
3. **Phase 3**: その他の章の見出しレベル調整
4. **Phase 4**: 全体の一貫性確認とビルドテスト

### 5. 期待される効果

- 改ページ数の削減：569回 → 約150回（70%削減）
- より読みやすい章構成
- PDFファイルサイズの最適化
- 印刷コストの削減

## 実装上の注意点

1. **内容の保持**: 見出しレベルを変更しても、内容は削除しない
2. **一貫性**: 全章で同じ見出し階層ルールを適用
3. **テスト**: 各修正後にビルドして表示を確認
4. **バックアップ**: 修正前のファイルは保存済み（/backup/manuscripts_backup/）