---
title: 第4回チャレンジ課題
---

> オブジェクト指向プログラミングおよび演習1 第4回


**チャレンジ課題は、通常課題ができている状態からさらにカスタマイズします。**  
**通常課題のプロジェクトとは別のプロジェクトを作成し、ファイルをコピーするなどしてチャレンジ課題用のプロジェクトを別途作ってください。**

## 図書館システム機能拡張：蔵書管理と高度な検索機能

通常課題で作成した `Book` クラスと `LibraryMember` クラスを基盤とし、新たに図書館全体を管理する `Library` クラスを導入します。

この課題を通じて、より大きなシステムにおけるクラス設計、複数オブジェクトの管理、そしてメソッドのオーバーロードを活かした柔軟な検索機能の実装方法を学びます。
カプセル化の原則を徹底し、各クラスの責任範囲を明確にすることを意識してください。

この資料にて言及されていない点は、各自で判断して良いです。
ただし、独自機能を追加する場合はレポートにできる限り詳細な仕様を明記してください。

### 前提条件

* チャレンジ課題で作成した `Book` クラスおよび `LibraryMember` クラス（またはその解答例）が正しく実装されていること。

※必要に応じて、既存クラスへの機能追加も行ってください。

### 詳細

1.  `Library` クラスの新規作成:
    * パッケージ: `jp.ac.ait.k00000.library`
    * フィールド:
        * `books`: `Book[]` 型、`private`（図書館の全蔵書配列：初期の要素数は0）。
        * `members`: `LibraryMember[]` 型、`private`（図書館の全会員配列：初期の要素数は0）。
    * コンストラクタ:
        * `public Library()`: `books` と `members` は空の配列で初期化する。
    * 蔵書管理メソッド:
        * `public boolean addBook(Book book)`: 蔵書リストに本を追加。すでに同じISBNの本が存在する場合は追加せず `false` を返し、メッセージを表示。成功時は `true`を返す。
        * `public boolean removeBook(String isbn)`: ISBNを指定して蔵書リストから本を削除。対象の本が存在しない、または貸出中の場合は削除せず `false` を返し、メッセージを表示。成功時は `true`を返す。
        * `public Book findBookByIsbn(String isbn)`: ISBNで蔵書を検索し、該当する `Book` オブジェクトを返す。見つからなければ `null`を返す。
    * 会員管理メソッド:
        * `public boolean registerMember(LibraryMember member)`: 会員リストに会員を登録。すでに同じ会員IDの会員が存在する場合は登録せず `false` を返し、メッセージを表示。成功時は `true`を返す。
        * `public boolean unregisterMember(String memberId)`: 会員IDを指定して会員を退会させる。対象の会員が存在しない、またはその会員が本を貸出中の場合は退会処理を行わず `false` を返し、メッセージを表示。成功時は `true`を返す。
        * `public LibraryMember findMemberById(String memberId)`: 会員IDで会員を検索し、該当する `LibraryMember` オブジェクトを返す。見つからなければ `null`を返す。
    * 貸出・返却業務メソッド（実際の貸出・返却処理は `LibraryMember` と `Book` のメソッドを利用）:
        * `public boolean lendBookToMember(String memberId, String isbn)`: 指定された会員IDの会員に、指定されたISBNの本を貸し出す。会員や本が存在しない、貸出条件を満たさない等の場合は `false` を返し、メッセージを表示。成功時は `true`を返す。
        * `public boolean receiveBookFromMember(String memberId, String isbn)`: 指定された会員IDの会員から、指定されたISBNの本の返却を受け付ける。各種チェックを行い、成功時は `true`、失敗時は `false` とメッセージ。
    * 書籍検索メソッド（メソッドのオーバーロードはできない）:
        * `public Book[] searchBook(String keyword)`: タイトルまたは著者にキーワード（部分一致、大文字・小文字区別なし）が含まれる本を検索し、配列で返す。
    * 表示系メソッド:
        * `public void displayAllBooks()`: 図書館の全蔵書の詳細情報を表示。
        * `public void displayAvailableBooks()`: 現在貸出可能な本の一覧を表示。
        * `public void displayAllMembersWithBorrowedBooks()`: 全会員の情報と、各会員が現在借りている本の一覧を表示。

2.  動作確認用の `LibrarySystemMain` クラスの作成:
    * `Library` オブジェクトを生成。
    * 複数の `Book` オブジェクトと `LibraryMember` オブジェクトを生成し、`Library` に登録。
    * 蔵書管理（追加、削除）、会員管理（登録、退会）のシナリオを実行。
    * 貸出・返却業務のシナリオを実行。
    * オーバーロードされた各種 `searchBooks` メソッドを実行し、結果を確認。
    * 各種表示系メソッドを実行。
    * エラーケース（存在しないISBNの指定、貸出上限、貸出中の本の削除試行など）もテストする。


----

# チャレンジ課題の提出に関して

`src`ディレクトリを圧縮したzipファイルと、以下で指定するレポートを提出してください。

- ファイル名「`K00000_04_add.md`」※K00000は自分の学籍番号とする
- 内容は以下のテンプレートに従う
- 「仕様補足」には、上記の仕様にない要件を独自で追加した内容を詳細に書いてください。
- 「参考文献」については、調べたURL等を事細かに記録しておくこと
    + LLMを使った場合、リンク共有が可能であればリンク共有を行う
    + リンク共有が行えない場合は、どのように聞いたかのプロンプトも同時に記載すること

### テンプレート

```md
第4回 チャレンジ課題レポート
----

Author: K00000 愛工太郎

## 仕様補足

独自に実装した要件があればここにまとめること

## 参考文献

- 参考にしたサイトのURL
- 参考にした書籍名とページ番号
- などを箇条書きする
```
