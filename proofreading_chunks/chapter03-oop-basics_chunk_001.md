<!-- 
校正チャンク情報
================
元ファイル: chapter03-oop-basics.md
チャンク: 1/12
行範囲: 1 - 249
作成日時: 2025-08-02 14:34:01

校正時の注意事項:
- 文章の流れは前後のチャンクを考慮してください
- このヘッダーとフッターは校正対象外です
- 校正が完了したらステータスを「completed」に変更してください
================
-->

# <b>3章</b> <span>オブジェクト指向の考え方</span> <small>よりよいプログラミング技法を求めて</small>

## 本章の学習目標

### この章で学ぶこと

1. オブジェクト指向の基本概念
    - カプセル化
        + データと処理の一体化
    - 継承
        + 既存クラスの機能の再利用
    - ポリモーフィズム
        + 同じインターフェイスで異なる実装
2. クラスとオブジェクト
    - クラス（設計図）とオブジェクト（実体）の関係
    - コンストラクタによるオブジェクトの初期化
    - インスタンス変数とメソッドの定義
3. カプセル化の実践
    - privateとpublicによるアクセス制御
    - getterとsetterメソッドの活用
    - データの整合性保護
4. 静的メンバーとオブジェクトの配列
    - staticフィールドとstaticメソッド
    - オブジェクトの配列による複数データの管理

### この章を始める前に

第2章でJavaの基本文法を理解していれば準備完了です。
第2章まででは、C言語などの手続き型プログラミングでの開発とそれほど違いがありませんでした。
この章からは、新しい視点としてのオブジェクト指向を学びましょう。



## 章の構成

本章では、オブジェクト指向プログラミングの基本的な考え方と実装方法を学習します。
プログラミングパラダイムの歴史的な発展を理解したうえで、以下の内容を順に学んでいきます。

1. オブジェクト指向の背景
    - ソフトウェア開発の課題と解決アプローチ
2. オブジェクト指向の基本概念
    - 手続き型との違いと3つの基本原則
3. クラスとオブジェクト
    - 設計図と実体の関係性
4. カプセル化の実践
    - データ保護とアクセス制御
5. 静的メンバー
    - クラスレベルの共有データと処理
6. 配列の活用
    - データの集合を一元的に管理

オブジェクト指向は、大規模なソフトウェア開発において威力を発揮する1つの有効なアプローチです。
その考え方の基礎と実装技術を身につけていきます。

## なぜオブジェクト指向が必要なのか
### C言語での開発で直面する実務的な課題

C言語はC言語で優れた言語ですが、実際の開発現場では以下のような課題に直面することがあります。

#### 実例：学生管理システムの開発

C言語で学生管理システムを開発する場合を考えてみましょう。

```c
// students.h
struct Student {
    int id;
    char name[50];
    double gpa;
    int year;
};

// students.c
void print_student(struct Student* s) {
    printf("ID: %d, Name: %s, GPA: %.2f\n", s->id, s->name, s->gpa);
}

void update_gpa(struct Student* s, double new_gpa) {
    s->gpa = new_gpa;
}

// main.c
int main() {
    struct Student student1 = {1001, "田中太郎", 3.5, 2};
    
    // 問題1: 誰でも直接データを変更できてしまう
    student1.gpa = -5.0;  // 不正な値でも設定可能
    
    // 問題2: 関連する関数がどこにあるか分かりにくい
    // print_student? display_student? show_student?
    
    return 0;
}
```

### 構造体と関数を分離することの限界

#### 1. データの保護ができない

構造体のメンバーは誰でも直接アクセスできるため、不正な値が設定されるリスクがあります。
たとえば、GPAに負の値を設定したり、学年に100を設定したりすることを防ぐには、すべてのアクセス箇所でチェックします。

#### 2. 関連する関数の管理が困難
学生に関する関数（表示、更新、削除など）が増えると、どの関数がどの構造体に対応するのかわかりにくくなります。命名規則で対応しようとしても、大規模プロジェクトでは限界があります。

#### 3. 仕様変更時の影響範囲が大きい
構造体のメンバーを変更すると、その構造体を使用しているすべての関数を修正します。たとえば、`name`を`first_name`と`last_name`に分割する場合、影響は広範囲に渡ります。


### より実践的な例：銀行口座システム

```c
// C言語での実装の問題点
struct BankAccount {
    char account_number[20];
    double balance;
    char owner_name[50];
};

// グローバル変数や外部からの直接アクセスによる問題
void transfer_money(struct BankAccount* from, struct BankAccount* to, double amount) {
    // 残高チェックを忘れやすい
    from->balance -= amount;  // 残高がマイナスになる可能性
    to->balance += amount;
}

// 異なる開発者が独自の関数を作成
void withdraw_money(struct BankAccount* acc, double amount) {
    acc->balance -= amount;  // また残高チェックを忘れている！
}
```


このような問題は、プロジェクトが大きくなるほど深刻になります。
データと処理が分離していることで、開発対象のコードの大規模化に伴い以下の問題が発生します。

- 一貫性の欠如
        + 同じ処理でも開発者によって異なる実装
- バグの温床
        + データ検証の漏れが各所で発生
- 保守の困難
        + どの関数がどのデータを操作するか追跡が困難

<div class="figure">

![手続き型とオブジェクト指向の構造比較](images/diagrams/chapter03-paradigm-comparison.png)

</div>

### オブジェクト指向による解決

オブジェクト指向プログラミングは、これらの実務的な問題を解決するアプローチの1つです。

1. データと処理の一体化
        + 構造体（データ）と関数（処理）を1つのクラスにまとめる
2. アクセス制御
        + `private`や`public`などのアクセス修飾子でデータを保護
3. 責任の明確化
        + 各クラスが自身のデータに対する責任を持つことで関心を分離させる

この章では、C言語での開発経験を活かしながら、オブジェクト指向がどのようにこれらの課題を解決するかを実践的に学んでいきます。

> 補足: プログラミングパラダイムの歴史的発展について詳しく知りたい人は、GitHubリポジトリの付録資料（`https://github.com/Nagatani/techbook-java-primer/tree/main/appendix/b02-programming-paradigms/`）を参照してください。そこでは、ソフトウェアクライシスからオブジェクト指向の誕生までの歴史的経緯を詳しく解説しています。


## オブジェクト指向とは

オブジェクト指向という言葉は、実は多様な意味を持っています。
ソフトウェア開発のさまざまな工程で、オブジェクト指向の考え方が適用されているからです。

まず、システム設計の段階では、オブジェクト指向設計（OOD: Object-Oriented Design）が用いられます。
これは、システムをオブジェクトの集合として設計し、それらの関係性を定義する手法です。

同様に、要求分析の段階ではオブジェクト指向分析（OOA: Object-Oriented Analysis）が、問題領域をオブジェクトの観点から分析します。
これらは総称してオブジェクト指向分析設計（OOAD: Object-Oriented Analysis and Design）と呼ばれます。

本書が焦点を当てるのはオブジェクト指向プログラミング（OOP: Object-Oriented Programming）です。
これは、設計されたオブジェクトを実際にプログラミング言語で実装する技術です。

Javaは、OOPを実践するために設計された言語であり、クラス、継承、ポリモーフィズムなどのOOPの主要概念を言語レベルでサポートしています。

さらに幅広い視点では、開発方法論やプロジェクト管理手法としてのオブジェクト指向、そしてプログラミング言語仕様としてのオブジェクト指向も存在しますが、これらは本書の範囲を超える内容です。

## オブジェクト指向を学ぶ意義

オブジェクト指向は、プログラミングの歴史のなかで生まれた多くのアプローチの1つです。
本書では、オブジェクト指向を特別視するのではなく、問題解決のための便利なツールの1つとして学びます。

C言語でのプログラミングでも、構造的なプログラミングや、関数ライブラリを使った柔軟な開発は可能です。
極論を言ってしまえば、新たな道具としてオブジェクト指向を学ばなくても、たいていのプログラムは作れます。

### よりよく継続的な開発を行うために

C言語でも十分なプログラミングは可能ですが、現実のソフトウェア開発では、プログラムの作成は全体の一部にすぎません。
作成されたプログラムは、その後長期にわたる「保守・運用」のフェーズに入り、この期間が実は開発期間よりもはるかに長く、コストも大きくなることが一般的です。

このような現実を踏まえると、プログラミング言語には単に動くプログラムを作ること以上の要求が突きつけられます。
まず、開発の効率化が重要です。同じ機能を何度も実装するのではなく、既存のコードを再利用し、新たな機能をすばやく追加できることが求められます。

次に、保守性の向上が不可欠です。
要求の変化やバグ修正の際に、変更箇所が明確で、変更の影響範囲が限定されていることが理想です。
そして、品質の向上も欠かせません。バグが少なく、意図が明確で、拡張性の高いコードを書くことが、長期的な成功につながります。

これらの要求を満たすアプローチが、オブジェクト指向プログラミングです。

### 大規模で長期的に維持可能なプログラムを作る

「もっと効率よくしたい」という要望から、オブジェクト指向という考え方が登場しました。
より効率よくプログラミングを行うことを目的として、保守運用を見据えた概念であることをよく理解してオブジェクト指向を学んでください。

実際、現代のプログラミングでは、オブジェクト指向だけでなく、さまざまなパラダイムを組み合わせて使うことが一般的です。
関数型プログラミング、並行プログラミング、リアクティブプログラミングなども併用されます。
オブジェクト指向は、これらのなかの1つのアプローチに過ぎません。



## オブジェクト指向の基本概念を実際のコードで理解する

理論的な説明の前に、実際のJavaコードを見てオブジェクト指向の基本概念を理解しましょう。

### 手続き型とオブジェクト指向の違い

#### 手続き型の例（C言語風）

手続き型プログラミングでは、データと処理が分離された構造となります。
以下の例では、この分離がどのような問題を引き起こすかを示しています。

<span class="listing-number">**サンプルコード3-1**</span>

```java
public class ProceduralExample {
    public static void main(String[] args) {
        String studentName = "田中太郎";  // ①
        int studentAge = 20;             // ①
        double studentGpa = 3.5;         // ①
        
        printStudent(studentName, studentAge, studentGpa);  // ②
    }
    
    public static void printStudent(String name, int age, double gpa) {  // ③
        System.out.println("名前: " + name + ", 年齢: " + age + ", GPA: " + gpa);
    }
}
```

実行結果：
```
名前: 田中太郎, 年齢: 20, GPA: 3.5
```



<!-- 
================
チャンク 1/12 の終了
校正ステータス: [ ] 未完了 / [x] 完了
================
-->
