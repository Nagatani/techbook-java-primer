# 第2章 Java基本文法 - Part E: 章末演習

## 実践演習課題

本章で学習した内容を定着させるため、段階的な演習課題に取り組みましょう。各課題は、実用的な場面を想定して設計されています。

### 基礎演習 2-1：データ型と変数
**目標**：Java基本データ型の理解と活用

**課題内容**：
学生情報管理の基礎プログラムを作成してください。
- 学生ID（整数）
- 学生名（文字列）
- 身長（小数点）
- 在学中フラグ（真偽値）

**技術的背景：型システムの重要性とJavaのデータ型設計**

プログラミング言語における型システムは、データの安全性と効率性を保証する重要なしくみです：

**C言語との型システムの違い：**
```c
// C言語：暗黙的な型変換が頻繁に発生
int i = 3.14;  // 警告は出るが、コンパイル可能（3になる）
char c = 1000; // オーバーフローしても実行される
```

```java
// Java：厳格な型チェック
int i = 3.14;  // コンパイルエラー：型の不一致
char c = 1000; // 正常（charは16ビット、0-65535）
```

**Javaの基本データ型の設計思想：**
- **明確なサイズ規定**：プラットフォーム独立性のため
  - int: 必ず32ビット（C言語では環境依存）
  - long: 必ず64ビット
- **boolean型の独立**：C言語の0/1ではなく専用型
- **charの16ビット化**：Unicode対応（日本語も一文字1char）

**実世界での型選択の重要性：**
- **金融システム**：BigDecimalで正確な金額計算
- **科学計算**：doubleで高精度計算
- **Webアプリケーション**：Stringで安全な文字列処理
- **組み込み**：byteで省メモリ

**メモリ効率と型選択：**
```java
// 100万人の年齢を保存する場合
byte[] ages = new byte[1_000_000];  // 1MB
int[] ages = new int[1_000_000];    // 4MB（4倍のメモリ）
```

この演習では、適切な型選択による安全で効率的なプログラミングを学びます。

**実装要件**：
- 各データ型の変数を適切に宣言・初期化する
- 標準入力から値を受け取り、変数に格納する
- すべての情報を整理して出力する

**評価ポイント**：

| 評価項目 |
| :--- |
| 適切なデータ型の選択 |
| 変数の命名規則の遵守 |
| 入力・出力処理の正確な実装 |

### 応用演習 2-2：制御構造の活用
**目標**：条件分岐と繰り返し処理の実践

**課題内容**：
学生の成績判定プログラムを作成してください。
- 5科目の点数を入力として受け取る
- 各科目の合格/不合格を判定（60点以上で合格）
- 平均点を計算する
- 総合判定（全科目合格で卒業認定）を出力する

**技術的背景：制御構造の進化と現代的な使い方**

制御構造は、プログラムの流れを決定する基本要素です。Javaの制御構造はC言語を基礎としながら、より安全で表現力豊かになっています：

**条件分岐の進化：**
```java
// Java 14以降：switch式（より安全で簡潔）
String grade = switch (score / 10) {
    case 10, 9 -> "S";
    case 8 -> "A";
    case 7 -> "B";
    case 6 -> "C";
    default -> "F";
};
// break忘れによるfall-throughバグを防止
```

**繰り返し処理の使い分け：**
- **for文**：回数が明確な場合（配列走査、カウント処理）
- **while文**：条件が明確な場合（ユーザー入力待ち）
- **拡張for文**：コレクション全体の処理（Java 5以降）
- **Stream API**：関数型スタイル（Java 8以降）

**実際の教育システムでの応用：**
- **大学の成績管理**：GPA計算、単位認定
- **資格試験システム**：合格基準の複雑な判定
- **e-ラーニング**：進捗管理、適応的学習

**パフォーマンスの考慮：**
```java
// 非効率：ループ内で毎回条件評価
for (int i = 0; i < list.size(); i++) { }

// 効率的：サイズを事前に取得
int size = list.size();
for (int i = 0; i < size; i++) { }
```

**論理演算子の短絡評価：**
```java
// &&は左がfalseなら右を評価しない（短絡評価）
if (student != null && student.getScore() > 60) { }
// nullチェックが先に行われるため安全
```

この演習では、効率的で読みやすい制御構造の実装を学びます。

**実装要件**：
- 繰り返し処理で5科目の点数を効率的に入力
- 条件分岐で合格判定を実装
- 論理演算子を使用して総合判定を実装

**評価ポイント**：

| 評価項目 |
| :--- |
| 適切な条件分岐の使用 |
| 繰り返し処理による効率的な実装 |
| 論理演算子の適切な使用 |

### 実践演習 2-3：配列を使った数値処理
**目標**：配列とアルゴリズムの基本的な組み合わせ

**課題内容**：
数値データ分析プログラムを作成してください。
- 10個の数値を配列に格納
- 最大値、最小値、平均値を計算
- 数値を昇順にソート
- 特定の値の検索機能

**技術的背景：配列とアルゴリズムの基礎**

配列は最も基本的なデータ構造であり、多くのアルゴリズムの基礎となります：

**Javaの配列の特徴：**
```java
// C言語：配列は単なるメモリ領域
int arr[10];  // サイズ情報なし
int size = sizeof(arr) / sizeof(int);

// Java：配列はオブジェクト
int[] arr = new int[10];
int size = arr.length;  // サイズ情報を保持
// 境界チェック付き（ArrayIndexOutOfBoundsException）
```

**基本的なアルゴリズムの計算量：**
| アルゴリズム | 時間計算量 | 用途 |
|------------|-----------|------|
| 線形探索 | O(n) | 未ソートデータ |
| 二分探索 | O(log n) | ソート済みデータ |
| バブルソート | O(n²) | 教育用 |
| クイックソート | O(n log n) | 実用的 |

**実世界でのデータ分析応用：**
- **株価分析**：移動平均、ボラティリティ計算
- **気象データ**：最高/最低気温、平均降水量
- **成績分析**：偏差値計算、順位付け
- **センサデータ**：異常値検出、トレンド分析

**メモリ効率とキャッシュ最適化：**
```java
// キャッシュフレンドリー：連続アクセス
for (int i = 0; i < arr.length; i++) {
    sum += arr[i];
}

// キャッシュ非効率：ランダムアクセス
for (int i = 0; i < arr.length; i++) {
    sum += arr[random.nextInt(arr.length)];
}
```

**Java標準ライブラリの活用：**
```java
// 実務では標準ライブラリを使用
Arrays.sort(arr);  // 高速なDual-Pivot Quicksort
int index = Arrays.binarySearch(arr, target);
```

この演習では、アルゴリズムの基礎を実装しながら、効率性の重要性を学びます。

**実装要件**：
- 配列の適切な初期化と操作
- ソートアルゴリズムの実装（バブルソートなど）
- 線形検索アルゴリズムの実装

**評価ポイント**：

| 評価項目 |
| :--- |
| 配列操作の正確な実装 |
| アルゴリズムの論理的な構成 |
| エラー処理の考慮 |

**拡張課題**：
- ユーザーが配列サイズを指定できるようにする
- 統計情報（中央値、標準偏差）の計算を追加

### 発展演習 2-4：総合プログラム
**目標**：第2章の全要素を統合した実用的なプログラム

**課題内容**：
簡易家計簿プログラムを作成してください。
- 支出項目と金額の入力
- カテゴリ別集計（食費、交通費、娯楽費など）
- 月間予算との比較
- 支出レポートの表示

**技術的背景：実用的なアプリケーション設計の基礎**

実用的なプログラムを作成する際は、単なる機能実装だけでなく、ユーザビリティと保守性を考慮する必要があります：

**家計簿アプリケーションの設計パターン：**
```java
// データ構造の設計例
// 方法1：並列配列（シンプルだが拡張性に欠ける）
String[] categories = {"食費", "交通費", "娯楽費"};
int[] expenses = new int[3];

// 方法2：二次元配列（より柔軟）
String[][] expenseData = new String[100][3]; // [日付, カテゴリ, 金額]

// 将来的にはオブジェクト指向で
class Expense {
    LocalDate date;
    String category;
    int amount;
}
```

**実際の家計簿アプリケーションの機能：**
- **マネーフォワード**：自動カテゴリ分類、銀行連携
- **Zaim**：レシート撮影、予算アラート
- **家計簿アプリケーション**：グラフ表示、家族共有

**ユーザビリティの考慮点：**
- **入力の簡便性**：頻出項目の記憶、予測入力
- **エラー処理**：負の金額、文字入力への対応
- **データ永続化**：ファイル保存（次章以降）
- **視覚的表現**：棒グラフ、円グラフ（GUI編）

**メソッド分割の重要性：**
```java
// 悪い例：main メソッドに全て記述
public static void main(String[] args) {
    // 500行のコード...
}

// 良い例：機能ごとにメソッド分割
public static void main(String[] args) {
    showMenu();
    processUserChoice();
}

private static void inputExpense() { }
private static void showReport() { }
private static void compareWithBudget() { }
```

**拡張性を考慮した設計：**
- **カテゴリの追加**：固定配列より動的な構造
- **期間指定**：日別、週別、月別集計
- **複数通貨対応**：為替レート考慮
- **データ分析**：支出傾向、節約提案

この演習では、実用的なプログラムの設計と実装の基礎を学びます。

**実装要件**：
- 複数のメソッドに機能を分割
- 配列または多次元配列でデータ管理
- メニュー形式のユーザーインターフェイス
- 基本的な入力検証

**評価ポイント**：

| 評価項目 |
| :--- |
| 適切なメソッド設計 |
| データ構造の効率的な活用 |
| ユーザビリティの考慮 |
| コードの可読性と保守性 |

### セルフチェック課題

各演習完了後、以下の項目で自己評価を行ってください：

**技能確認チェック**

| チェック項目 |
| :--- |
| エラーなしでコンパイル・実行できる |
| 意図した動作が正確に実行される |
| C言語との違いを説明できる |
| コードに適切なコメントが記述されている |

**理解度確認チェック**

| チェック項目 |
| :--- |
| 使用したJava文法要素の役割を説明できる |
| 他の問題に応用できる自信がある |
| より良い実装方法を考えることができる |

### 発展的な学習課題

さらなるスキル向上を目指す方は、以下の課題にも挑戦してみてください：

1. **アルゴリズム実装課題**：
   - クイックソート、マージソートの実装
   - 二分探索アルゴリズムの実装
   - 数学的計算（階乗、フィボナッチ数列）

2. **文字列処理課題**：
   - 文字列の逆順変換
   - 単語カウント機能
   - 簡単な暗号化・復号

3. **データ構造課題**：
   - 2次元配列を使った表計算
   - ゲーム盤（オセロ、三目並べ）の実装
   - 簡単な画像処理（ASCIIアート）

## 解答例とヒント

### 基礎演習 2-1 の解答例

```java
import java.util.Scanner;

public class StudentInfo {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        
        // 変数の宣言
        int studentId;
        String studentName;
        double height;
        boolean isEnrolled;
        
        // 入力処理
        System.out.print("学生IDを入力してください: ");
        studentId = scanner.nextInt();
        scanner.nextLine(); // 改行文字を消費
        
        System.out.print("学生名を入力してください: ");
        studentName = scanner.nextLine();
        
        System.out.print("身長を入力してください(cm): ");
        height = scanner.nextDouble();
        
        System.out.print("在学中ですか？(true/false): ");
        isEnrolled = scanner.nextBoolean();
        
        // 出力処理
        System.out.println("\n=== 学生情報 ===");
        System.out.println("学生ID: " + studentId);
        System.out.println("氏名: " + studentName);
        System.out.println("身長: " + height + "cm");
        System.out.println("在学状況: " + (isEnrolled ? "在学中" : "卒業/退学"));
        
        scanner.close();
    }
}
```

### 実装のポイント

1. **Scanner使用時の注意**：
   - `nextInt()`の後に`nextLine()`を使う場合は、改行文字を消費する必要がある
   - リソースリークを防ぐため、最後に`close()`を呼ぶ

2. **三項演算子の活用**：
   - `isEnrolled ? "在学中" : "卒業/退学"`で簡潔な条件分岐

3. **適切な型の選択**：
   - 学生IDは整数型（int）
   - 身長は小数を含むため浮動小数点型（double）

### 課題に取り組む際のアドバイス

1. **段階的な実装**：
   - まず基本機能を実装してから、徐々に機能を追加
   - 各機能が正しく動作することを確認してから次へ進む

2. **エラー処理の考慮**：
   - ユーザーが不正な入力をした場合の対処を考える
   - try-catch文の使用（後の章で詳しく学習）

3. **コードの整理**：
   - 適切なインデント
   - 意味のある変数名
   - 必要に応じたコメントの追加

4. **テストの重要性**：
   - 正常なケースだけでなく、異常なケースもテスト
   - 境界値（最大値、最小値、0など）のテスト

これらの演習を通じて、Javaの基本文法を実践的に習得し、より複雑なプログラムを作成する基礎を築いてください。次章では、これらの基礎知識をもとに、オブジェクト指向プログラミングの本格的な学習に進みます。