# ç¬¬11ç«  ãƒ©ãƒ ãƒ€å¼ã¨é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹

## ğŸ¯ç·åˆæ¼”ç¿’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ã‚¹ãƒ†ãƒƒãƒ—

æœ¬ç« ã§å­¦ã¶ãƒ©ãƒ ãƒ€å¼ã¯ã€**ç·åˆæ¼”ç¿’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ŒToDoãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€** ã®GUIã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã‚’ã€é©šãã»ã©ç°¡æ½”ã§èª­ã¿ã‚„ã™ãè¨˜è¿°ã™ã‚‹ãŸã‚ã«ä¸å¯æ¬ ãªæ©Ÿèƒ½ã§ã™ã€‚

- **ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®å®Ÿè£…**:ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‡¦ç†ã‚’ã€å¾“æ¥ã®åŒ¿åã‚¯ãƒ©ã‚¹ã§ã¯ãªãã€ãƒ©ãƒ ãƒ€å¼ã‚’ä½¿ã£ã¦ã‚¹ãƒãƒ¼ãƒˆã«è¨˜è¿°ã—ã¾ã™ã€‚
  ```java
  // åŒ¿åã‚¯ãƒ©ã‚¹ã§ã®è¨˜è¿°ï¼ˆå†—é•·ï¼‰
  addButton.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
          addNewTask();
      }
  });

  // ãƒ©ãƒ ãƒ€å¼ã§ã®è¨˜è¿°ï¼ˆç°¡æ½”ï¼ï¼‰
  addButton.addActionListener(e -> addNewTask());
  ```
- **ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§å‘ä¸Š**: ãƒ©ãƒ ãƒ€å¼ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ã€Œä½•ãŒèµ·ããŸã‚‰ã€ã€Œä½•ã‚’ã™ã‚‹ã‹ã€ã¨ã„ã†ãƒ­ã‚¸ãƒƒã‚¯ãŒç›´æ¥çš„ã«è¡¨ç¾ã•ã‚Œã€ã‚³ãƒ¼ãƒ‰ã®æ„å›³ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚

æœ¬ç« ã‚’ãƒã‚¹ã‚¿ã™ã‚‹ã“ã¨ã§ã€ãƒ¢ãƒ€ãƒ³Javaã«ãŠã‘ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ãƒ—ãƒ­ã‚°ãƒ©ãƒŸï¿½ï¿½ã‚°ã®æ¨™æº–çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’èº«ã«ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## 11.1 ãƒ©ãƒ ãƒ€å¼ã¨ã¯ï¼Ÿ

**ãƒ©ãƒ ãƒ€å¼**ã¯ã€Java 8ã§å°å…¥ã•ã‚ŒãŸã€**åŒ¿åé–¢æ•°ï¼ˆåå‰ã®ãªã„é–¢æ•°ï¼‰** ã‚’ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ã§ã™ã€‚ã“ã‚Œã¾ã§åŒ¿åã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ã¦ã„ãŸå†—é•·ãªã‚³ãƒ¼ãƒ‰ã‚’ã€éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

### åŸºæœ¬çš„ãªæ§‹æ–‡

ãƒ©ãƒ ãƒ€å¼ã®åŸºæœ¬æ§‹æ–‡ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

`(å¼•æ•°ãƒªã‚¹ãƒˆ) -> { å‡¦ç†æœ¬ä½“ }`

-   `->`ï¼ˆã‚¢ãƒ­ãƒ¼æ¼”ç®—å­ï¼‰ãŒã€å¼•æ•°ã¨å‡¦ç†ã‚’åŒºåˆ‡ã‚Šã¾ã™ã€‚
-   å‡¦ç†ãŒ1è¡Œã®å ´åˆã¯ã€`{}`ã¨`return`æ–‡ã‚’çœç•¥ã§ãã¾ã™ã€‚
-   å¼•æ•°ã®å‹ã¯ã€å¤šãã®å ´åˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒæ¨è«–ã—ã¦ãã‚Œã‚‹ãŸã‚çœç•¥å¯èƒ½ã§ã™ã€‚

### å¾“æ¥ã®åŒ¿åã‚¯ãƒ©ã‚¹ vs ãƒ©ãƒ ãƒ€å¼

GUIã®ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†ã‚’ä¾‹ã«ã€ãã®é•ã„ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```java
// å¾“æ¥ã®åŒ¿åã‚¯ãƒ©ã‚¹
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼");
    }
});

// ãƒ©ãƒ ãƒ€å¼
button.addActionListener(e -> System.out.println("ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼"));
```

`new ActionListener()` ã‚„ `actionPerformed` ãƒ¡ã‚½ãƒƒãƒ‰ã®å®£è¨€ã¨ã„ã£ãŸå®šå‹çš„ãªã‚³ãƒ¼ãƒ‰ãŒãªããªã‚Šã€ã€Œå¼•æ•° `e` ã‚’å—ã‘å–ã£ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã™ã‚‹ã€ã¨ã„ã†æœ¬è³ªçš„ãªå‡¦ç†ã ã‘ãŒæ®‹ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚

## 11.2 é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹

ãƒ©ãƒ ãƒ€å¼ã¯ã€ã©ã®ã‚ˆã†ãªå ´æ‰€ã§ã‚‚æ›¸ã‘ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ©ãƒ ãƒ€å¼ã¯ã€**é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ï¼ˆFunctional Interfaceï¼‰** ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

**é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹**ã¨ã¯ã€**å®Ÿè£…ã™ã¹ãæŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã ã‘**å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ã“ã¨ã§ã™ã€‚`@FunctionalInterface` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ï¼ˆå¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ï¼‰ã€‚

```java
@FunctionalInterface
interface MyFunction {
    int calculate(int x, int y);
}

public class Main {
    public static void main(String[] args) {
        // ãƒ©ãƒ ãƒ€å¼ã‚’é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹å‹ã®å¤‰æ•°ã«ä»£å…¥
        MyFunction addition = (a, b) -> a + b;
        MyFunction subtraction = (a, b) -> a - b;

        System.out.println("è¶³ã—ç®—: " + addition.calculate(10, 5)); // 15
        System.out.println("å¼•ãç®—: " + subtraction.calculate(10, 5)); // 5
    }
}
```

`ActionListener`ã‚„`Comparator`ã‚‚ã€å®Ÿè£…ã™ã¹ãæŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã ã‘ãªã®ã§ã€ï¿½ï¿½ï¿½æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã§ã™ã€‚ãã®ãŸã‚ã€ãƒ©ãƒ ãƒ€å¼ã§ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ããŸã®ã§ã™ã€‚

### æ¨™æº–ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹

Javaã«ã¯ã€`java.util.function`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã€ã‚ˆãä½¿ã‚ã‚Œã‚‹æ±ç”¨çš„ãªé–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãŒå¤šæ•°ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

| ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ | æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
| :--- | :--- | :--- |
| `Predicate<T>` | `boolean test(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€`boolean`å€¤ã‚’è¿”ã™ï¼ˆåˆ¤å®šï¼‰ |
| `Function<T, R>` | `R apply(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€Rå‹ã‚’è¿”ã™ï¼ˆå¤‰æ›ï¼‰ |
| `Consumer<T>` | `void accept(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€ä½•ã‚‚è¿”ã•ãªã„ï¼ˆæ¶ˆè²»ï¼‰ |
| `Supplier<T>` | `T get()` | ä½•ã‚‚å—ã‘å–ã‚‰ãšã€Tå‹ã‚’è¿”ã™ï¼ˆä¾›çµ¦ï¼‰ |

```java
import java.util.function.*;

public class StandardFunctionalInterfaces {
    public static void main(String[] args) {
        // Predicate: æ–‡å­—åˆ—ãŒç©ºã‹ã©ã†ã‹ã‚’åˆ¤å®š
        Predicate<String> isEmpty = s -> s.isEmpty();
        System.out.println("''ã¯ç©ºï¼Ÿ: " + isEmpty.test("")); // true

        // Function: æ–‡å­—åˆ—ã‚’é•·ã•ã«å¤‰æ›
        Function<String, Integer> getLength = s -> s.length();
        System.out.println("'Java'ã®é•·ã•: " + getLength.apply("Java")); // 4

        // Consumer: æ–‡å­—åˆ—ã‚’å¤§æ–‡å­—ã§å‡ºåŠ›
        Consumer<String> printUpper = s -> System.out.println(s.toUpperCase());
        printUpper.accept("hello"); // HELLO

        // Supplier: ç¾åœ¨æ™‚åˆ»ã‚’ä¾›çµ¦
        Supplier<Long> currentTime = () -> System.currentTimeMillis();
        System.out.println("ç¾åœ¨æ™‚åˆ»: " + currentTime.get());
    }
}
```

## 11.3 ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§

ãƒ©ãƒ ãƒ€å¼ãŒæ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘ã®å ´åˆã€**ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§**ã¨ã„ã†ã€ã•ã‚‰ã«ç°¡æ½”ãªè¨˜æ³•ãŒä½¿ãˆã¾ã™ã€‚

| ç¨®é¡ | æ§‹æ–‡ | ãƒ©ãƒ ãƒ€å¼ã®ä¾‹ |
| :--- | :--- | :--- |
| é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§ | `ã‚¯ãƒ©ã‚¹å::ãƒ¡ã‚½ãƒƒãƒ‰å` | `s -> Integer.parseInt(s)` |
| ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§ | `ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°::ãƒ¡ã‚½ãƒƒãƒ‰å` | `s -> System.out.println(s)` |
| ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‚ç…§ | `ã‚¯ãƒ©ã‚¹å::new` | `() -> new ArrayList<>()` |

```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.function.Consumer;
import java.util.function.Function;
import java.util.function.Supplier;

public class MethodReferenceExample {
    public static void main(String[] args) {
        List<String> words = Arrays.asList("apple", "banana", "cherry");

        // é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§
        // ãƒ©ãƒ ãƒ€: s -> System.out.println(s)
        Consumer<String> printer = System.out::println;
        words.forEach(printer);

        // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§
        // ãƒ©ãƒ ãƒ€: s -> s.toUpperCase()
        Function<String, String> toUpper = String::toUpperCase;
        words.stream().map(toUpper).forEach(printer);

        // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‚ç…§
        // ãƒ©ãƒ ãƒ€: () -> new ArrayList<>()
        Supplier<List<String>> listFactory = ArrayList::new;
        List<String> newList = listFactory.get();
        System.out.println("æ–°ã—ã„ãƒªã‚¹ãƒˆ: " + newList);
    }
}
```

## ã¾ã¨ã‚

æœ¬ç« ã§ã¯ã€ãƒ¢ãƒ€ãƒ³Javaãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ã¨ãªã‚‹ãƒ©ãƒ ãƒ€å¼ã¨é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã«ã¤ã„ã¦å­¦ã³ã¾ã—ãŸã€‚

-   **ãƒ©ãƒ ãƒ€å¼**ã¯ã€åŒ¿åé–¢æ•°ã‚’ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ã§ã™ã€‚
-   ãƒ©ãƒ ãƒ€å¼ã¯ã€**æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã ã‘ã®é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹**ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚
-   `Predicate`, `Function`, `Consumer`, `Supplier`ãªã©ã€æ±ç”¨çš„ãªé–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãŒæ¨™æº–ã§ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚
-   **ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§**ã‚’ä½¿ã†ã¨ã€æ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘ã®ãƒ©ãƒ ãƒ€å¼ã‚’ï¿½ï¿½ã‚‰ã«ç°¡æ½”ã«æ›¸ã‘ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ä½¿ã„ã“ãªã™ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ãŒå‘ä¸Šã—ã€ã‚ˆã‚Šå®£è¨€çš„ã§ç°¡æ½”ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
