# ç¬¬11ç«  ãƒ©ãƒ ãƒ€å¼ã¨é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹

## ğŸ¯ç·åˆæ¼”ç¿’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ã‚¹ãƒ†ãƒƒãƒ—

æœ¬ç« ã§å­¦ã¶ãƒ©ãƒ ãƒ€å¼ã¯ã€**ç·åˆæ¼”ç¿’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ŒToDoãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€** ã®GUIã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã‚’ã€é©šãã»ã©ç°¡æ½”ã§èª­ã¿ã‚„ã™ãè¨˜è¿°ã™ã‚‹ãŸã‚ã«ä¸å¯æ¬ ãªæ©Ÿèƒ½ã§ã™ã€‚

- **ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®å®Ÿè£…**:ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‡¦ç†ã‚’ã€å¾“æ¥ã®åŒ¿åã‚¯ãƒ©ã‚¹ã§ã¯ãªãã€ãƒ©ãƒ ãƒ€å¼ã‚’ä½¿ã£ã¦ã‚¹ãƒãƒ¼ãƒˆã«è¨˜è¿°ã—ã¾ã™ã€‚
  ```java
  // åŒ¿åã‚¯ãƒ©ã‚¹ã§ã®è¨˜è¿°ï¼ˆå†—é•·ï¼‰
  addButton.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
          addNewTask();
      }
  });

  // ãƒ©ãƒ ãƒ€å¼ã§ã®è¨˜è¿°ï¼ˆç°¡æ½”ï¼ï¼‰
  addButton.addActionListener(e -> addNewTask());
  ```
- **ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§å‘ä¸Š**: ãƒ©ãƒ ãƒ€å¼ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ã€Œä½•ãŒèµ·ããŸã‚‰ã€ã€Œä½•ã‚’ã™ã‚‹ã‹ã€ã¨ã„ã†ãƒ­ã‚¸ãƒƒã‚¯ãŒç›´æ¥çš„ã«è¡¨ç¾ã•ã‚Œã€ã‚³ãƒ¼ãƒ‰ã®æ„å›³ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚

æœ¬ç« ã‚’ãƒã‚¹ã‚¿ã™ã‚‹ã“ã¨ã§ã€ãƒ¢ãƒ€ãƒ³Javaã«ãŠã‘ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®æ¨™æº–çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’èº«ã«ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## 11.1 åŒ¿åã‚¯ãƒ©ã‚¹ã‹ã‚‰ãƒ©ãƒ ãƒ€å¼ã¸

Java 8ã§ãƒ©ãƒ ãƒ€å¼ãŒå°å…¥ã•ã‚Œã‚‹å‰ã€ãã®å ´é™ã‚Šã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹å®Ÿè£…ã‚’æä¾›ã™ã‚‹ãŸã‚ã«ã¯**åŒ¿åã‚¯ãƒ©ã‚¹ï¼ˆAnonymous Classï¼‰**ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã¯åå‰ã‚’æŒãŸãªã„ã‚¯ãƒ©ã‚¹ã§ã€ç‰¹ã«GUIã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãªã©ã§å¤šç”¨ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

```java
// åŒ¿åã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼");
    }
});
```
ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€`actionPerformed`ã¨ã„ã†1ã¤ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã ã‘ã«ã€`new ActionListener() { ... }`ã¨ã„ã†å®šå‹çš„ãªè¨˜è¿°ãŒå¤šãã€å†—é•·ã§ã—ãŸã€‚

**ãƒ©ãƒ ãƒ€å¼**ã¯ã€ã“ã®åŒ¿åã‚¯ãƒ©ã‚¹ã®è¨˜è¿°ã‚’ã€æœ¬è³ªçš„ãªå‡¦ç†ã ã‘ã‚’æŠœãå‡ºã—ã¦åŠ‡çš„ã«ç°¡æ½”ã«ã™ã‚‹ãŸã‚ã«å°å…¥ã•ã‚Œã¾ã—ãŸã€‚

```java
// ãƒ©ãƒ ãƒ€å¼ã‚’ä½¿ã£ãŸå ´åˆ
button.addActionListener(e -> System.out.println("ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼"));
```

## 11.2 é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹

ãƒ©ãƒ ãƒ€å¼ã¯ã€ã©ã®ã‚ˆã†ãªå ´æ‰€ã§ã‚‚æ›¸ã‘ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ©ãƒ ãƒ€å¼ã¯ã€**é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ï¼ˆFunctional Interfaceï¼‰** ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

**é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹**ã¨ã¯ã€**å®Ÿè£…ã™ã¹ãæŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã ã‘**å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ã“ã¨ã§ã™ã€‚`@FunctionalInterface` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒæŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã ã‘ã‹ï¿½ï¿½ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã‚‹ãŸã‚ã€ä»˜ã‘ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

`ActionListener`ã‚„å‰ç« ã®`Comparator`ã‚‚ã€å®Ÿè£…ã™ã¹ãæŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè³ªçš„ã«1ã¤ã ã‘ã§ã™ã®ã§ã€é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã§ã™ã€‚ãã®ãŸã‚ã€ãƒ©ãƒ ãƒ€å¼ã§ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ããŸã®ã§ã™ã€‚

```java
@FunctionalInterface
interface MyFunction {
    int calculate(int x, int y);
}

public class Main {
    public static void main(String[] args) {
        // ãƒ©ãƒ ãƒ€å¼ã‚’é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹å‹ã®å¤‰æ•°ã«ä»£å…¥
        MyFunction addition = (a, b) -> a + b;
        MyFunction subtraction = (a, b) -> a - b;

        System.out.println("è¶³ã—ç®—: " + addition.calculate(10, 5)); // 15
        System.out.println("å¼•ãç®—: " + subtraction.calculate(10, 5)); // 5
    }
}
```

### ãƒ©ãƒ ãƒ€å¼ã®æ§‹æ–‡ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ©ãƒ ãƒ€å¼ã¯ã€çŠ¶æ³ã«å¿œã˜ã¦è¨˜è¿°ã‚’ã•ã‚‰ã«ç°¡ç•¥åŒ–ã§ãã¾ã™ã€‚

-   **å¼•æ•°ã®å‹ã®çœç•¥**: `(int a, int b) -> ...` ã¯ `(a, b) -> ...` ã¨æ›¸ã‘ã¾ã™ã€‚
-   **å¼•æ•°ãŒ1ã¤ã®å ´åˆã€æ‹¬å¼§ã®çœç•¥**: `(a) -> ...` ã¯ `a -> ...` ã¨æ›¸ã‘ã¾ã™ã€‚
-   **å‡¦ç†ãŒ1è¡Œã®å ´åˆã€ä¸­æ‹¬å¼§ã®çœç•¥**: `a -> { return a * 2; }` ã¯ `a -> a * 2` ã¨æ›¸ã‘ã¾ã™ã€‚
-   **å¼•æ•°ãŒãªã„å ´åˆ**: `() -> System.out.println("Hello");` ã®ã‚ˆã†ã«æ‹¬å¼§ã ã‘ã‚’æ›¸ãã¾ã™ã€‚

### `java.util.function` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

Javaã«ã¯ã€`java.util.function`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã€ã‚ˆãä½¿ã‚ã‚Œã‚‹æ±ç”¨çš„ãªé–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãŒå¤šæ•°ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€è‡ªåˆ†ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å®šç¾©ã™ã‚‹æ‰‹é–“ã‚’çœã‘ã¾ã™ã€‚

| ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ | æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
| :--- | :--- | :--- |
| `Predicate<T>` | `boolean test(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€`boolean`å€¤ã‚’è¿”ã™ï¼ˆåˆ¤å®šï¼‰ |
| `Function<T, R>` | `R apply(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€Rå‹ã‚’è¿”ã™ï¼ˆå¤‰æ›ï¼‰ |
| `Consumer<T>` | `void accept(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€ä½•ã‚‚è¿”ã•ãªã„ï¼ˆæ¶ˆè²»ï¼‰ |
| `Supplier<T>` | `T get()` | ä½•ã‚‚å—ã‘å–ã‚‰ãšã€Tå‹ã‚’è¿”ã™ï¼ˆä¾›çµ¦ï¼‰ |
| `UnaryOperator<T>` | `T apply(T t)` | Tå‹ã‚’å—ã‘å–ã‚Šã€åŒã˜Tå‹ã‚’è¿”ã™ï¼ˆå˜é …æ¼”ç®—ï¼‰ |
| `BinaryOperator<T>` | `T apply(T t1, T t2)` | åŒã˜Tå‹ã‚’2ã¤å—ã‘å–ã‚Šã€åŒã˜Tå‹ã‚’è¿”ã™ï¼ˆï¿½ï¿½é …æ¼”ç®—ï¼‰ |

```java
import java.util.function.*;

public class StandardFunctionalInterfaces {
    public static void main(String[] args) {
        // Predicate: æ–‡å­—åˆ—ãŒç©ºã‹ã©ã†ã‹ã‚’åˆ¤å®š
        Predicate<String> isEmpty = s -> s.isEmpty();
        System.out.println("''ã¯ç©ºï¼Ÿ: " + isEmpty.test("")); // true

        // Function: æ–‡å­—åˆ—ã‚’é•·ã•ã«å¤‰æ›
        Function<String, Integer> getLength = s -> s.length();
        System.out.println("'Java'ã®é•·ã•: " + getLength.apply("Java")); // 4

        // Consumer: æ–‡å­—åˆ—ã‚’å¤§æ–‡å­—ã§å‡ºåŠ›
        Consumer<String> printUpper = s -> System.out.println(s.toUpperCase());
        printUpper.accept("hello"); // HELLO

        // Supplier: ç¾åœ¨æ™‚åˆ»ã‚’ä¾›çµ¦
        Supplier<Long> currentTime = () -> System.currentTimeMillis();
        System.out.println("ç¾åœ¨æ™‚åˆ»: " + currentTime.get());
    }
}
```

## 11.3 ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§

ãƒ©ãƒ ãƒ€å¼ãŒæ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³ã ã™ã ã‘ã®å ´åˆã€**ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§ï¼ˆMethod Referenceï¼‰**ã¨ã„ã†ã€ã•ã‚‰ã«ç°¡æ½”ãªè¨˜æ³•ãŒä½¿ãˆã¾ã™ã€‚`ã‚¯ãƒ©ã‚¹å::ãƒ¡ã‚½ãƒƒãƒ‰å`ã‚„`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°::ãƒ¡ã‚½ãƒƒãƒ‰å`ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚

| ç¨®é¡ | æ§‹æ–‡ | ãƒ©ãƒ ãƒ€å¼ã®ä¾‹ |
| :--- | :--- | :--- |
| **é™çš„ï¿½ï¿½ã‚½ãƒƒãƒ‰å‚ç…§** | `ã‚¯ãƒ©ã‚¹å::é™çš„ãƒ¡ã‚½ãƒƒãƒ‰å` | `s -> Integer.parseInt(s)` |
| **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§**<br>(ç‰¹å®šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹) | `ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°::ãƒ¡ã‚½ãƒƒãƒ‰å` | `s -> System.out.println(s)` |
| **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§**<br>(ä¸ç‰¹å®šã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹) | `ã‚¯ãƒ©ã‚¹å::ãƒ¡ã‚½ãƒƒãƒ‰å` | `s -> s.toUpperCase()` |
| **ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‚ç…§** | `ã‚¯ãƒ©ã‚¹å::new` | `() -> new ArrayList<>()` |

```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.function.Consumer;
import java.util.function.Function;
import java.util.function.Supplier;

public class MethodReferenceExample {
    public static void main(String[] args) {
        List<String> words = Arrays.asList("apple", "banana", "cherry");

        // ãƒ©ãƒ ãƒ€: s -> System.out.println(s)
        // ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§: System.out::println
        words.forEach(System.out::println);

        // ãƒ©ãƒ ãƒ€: s -> s.toUpperCase()
        // ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§: String::toUpperCase
        words.stream()
             .map(String::toUpperCase)
             .forEach(System.out::println);

        // ãƒ©ãƒ ãƒ€: () -> new ArrayList<>()
        // ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§: ArrayList::new
        Supplier<List<String>> listFactory = ArrayList::new;
        List<String> newList = listFactory.get();
        System.out.println("æ–°ã—ã„ãƒªã‚¹ãƒˆ: " + newList);
    }
}
```

## 11.4 ãƒ©ãƒ ãƒ€å¼ã®å¿œç”¨ä¾‹

ãƒ©ãƒ ãƒ€å¼ã¯ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ“ä½œã ã‘ã§ãªãã€Javaãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã•ã¾ã–ã¾ãªå ´é¢ã§ã‚³ãƒ¼ãƒ‰ã‚’ç°¡æ½”ã«ã—ã¾ã™ã€‚

### ã‚¹ãƒ¬ãƒƒãƒ‰ã®ç”Ÿæˆã¨å®Ÿè¡Œ

`Runnable`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ï¼ˆ`run`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ï¼‰ã‚‚ãƒ©ãƒ ãƒ€å¼ã§ç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ã€‚

```java
public class ThreadLambdaExample {
    public static void main(String[] args) {
        // åŒ¿åã‚¯ãƒ©ã‚¹ã§ã®Runnable
        Thread t1 = new Thread(new Runnable() {
            public void run() {
                System.out.println("Thread t1 (Anonymous) is running...");
            }
        });
        t1.start();

        // ãƒ©ãƒ ãƒ€å¼ã§ã®Runnable
        Thread t2 = new Thread(() -> System.out.println("Thread t2 (Lambda) is running..."));
        t2.start();
    }
}
```

## ã¾ã¨ã‚

æœ¬ç« ã§ã¯ã€ãƒ¢ãƒ€ãƒ³Javaãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ã¨ãªã‚‹ãƒ©ãƒ ãƒ€å¼ã¨é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã«ã¤ã„ã¦å­¦ã³ã¾ã—ãŸã€‚

-   **ãƒ©ãƒ ãƒ€å¼**ã¯ã€åŒ¿åé–¢æ•°ã‚’ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ã§ã€å†—é•·ãªåŒ¿åã‚¯ãƒ©ã‚¹ã‚’ç½®ãæ›ãˆã¾ã™ã€‚
-   ãƒ©ãƒ ãƒ€å¼ã¯ã€**æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã ã‘ã®é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹**ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚
-   `Predicate`, `Function`, `Consumer`, `Supplier`ãªã©ã€æ±ç”¨çš„ãªé–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãŒæ¨™æº–ã§ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚
-   **ãƒ¡ã‚½ãƒƒãƒ‰å‚ç…§**ã‚’ä½¿ã†ã¨ã€æ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³ã ã™ã ã‘ã®ãƒ©ãƒ ãƒ€å¼ã‚’ã•ã‚‰ã«ç°¡æ½”ã«æ›¸ã‘ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ä½¿ã„ã“ãªã™ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ãŒå‘ä¸Šã—ã€ã‚ˆã‚Šå®£è¨€çš„ã§ç°¡æ½”ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚