# <b>1章</b> <span>Java入門と開発環境構築</span> <small>プログラミングの新たな世界への第一歩</small>

## 本章の学習目標

### この章で学ぶこと

1. Javaプログラムの書き方
    - 「Hello, World!!」から始めて、基本的なJavaコードの記述方法を学ぶ
2. プログラムの実行確認
    - コンパイルと実行の方法、エラーが出た時の対処方法を覚える
3. Java言語の特徴
    - C言語との違いや、Javaならではの便利な機能を理解する

### この章を始める前に

C言語の基礎（変数、関数、if文、ループ）を理解していれば準備OKです。

### 本書の考え方

オブジェクト指向プログラミングは、よく「現代のプログラミングの主流」と言われますが、実際にはプログラミングの歴史の中で生まれた1つの考え方に過ぎません。
構造化プログラミングやモジュラープログラミングと同様に、それぞれの時代の課題を解決するために生まれた手法の1つです。

本書がJavaを選んだ理由は、オブジェクト指向を学ぶためだけではありません。
Javaは、将来さまざまなプログラミング言語を学ぶための優れた礎となる言語として有効だからです。

理由は次の通りです。

- 豊富な機能
    + オブジェクト指向だけでなく、関数型プログラミング、並行処理、ネットワークプログラミングなど、現代のプログラミングで必要とされる多様な概念を学べる
- 厳密な型システム
    + 型の概念をしっかり学ぶことで、他の言語の学習がスムーズになる
- 実用性
    + 企業システム、Webアプリケーション、科学技術計算など、実際の現場で広く使われており、学んだ知識がすぐに活かせる<span class="footnote">かつてはAndroidアプリ開発の主要言語でしたが、現在はKotlinが推奨されています。ただし、既存のAndroidアプリの多くはJavaで書かれており、保守・改修の現場ではJavaの知識が必要とされています。</span>

本書は、読者の皆さんがプログラミングスキルを継続的に向上させ、将来どんな言語や技術に出会っても対応できる基礎力を身につけることを目標としています。
Javaを通じて学ぶ概念や考え方は、きっと他の言語を学ぶ際の強力な武器となるでしょう。

## 本書のGitHubリポジトリについて

本書の学習を効果的に進めるため、専用のGitHubリポジトリを用意しています。

リポジトリURL: https://github.com/Nagatani/techbook-java-primer

### リポジトリに含まれる内容

このリポジトリには、本書での学習を支援するさまざまなリソースが収録されています。

#### 演習課題とサンプルコード
- 章末演習課題
    + 各章の理解度を確認するための実践的な課題
- サンプルコード
    + 本文で紹介されるコード例の完全版
- 解答例
    + 演習課題の参考解答とポイント解説

#### 付録資料
- 付録A: 開発環境構築の詳細手順
- 付録B: 技術的な詳細解説（Deep Dive）- 15セクション
    + B.01: JVMアーキテクチャとバイトコード
    + B.02: Javaメモリモデル
    + B.03: ソフトウェア設計原則
    + B.04: 仮想メソッドテーブル
    + B.05: 不変性の設計パターン
    + B.06: インターフェイスの進化
    + B.07: コレクションの内部実装
    + B.08: 型消去とジェネリクス
    + B.09: Stream APIの内部実装
    + B.10: プログラミングパラダイム
    + B.11: レコードとデータ指向プログラミング
    + B.12: Enumの高度な活用
    + B.13: 例外処理のパフォーマンス
    + B.14: NIO.2の高度な機能
    + B.15: テスト戦略
- 付録C: ソフトウェア工学の理論的基盤
- 付録D: 統合プロジェクト「学生管理システム」の段階的実装
- 付録E: データベースプログラミング（JDBC）
- 付録F: java.time API完全ガイド
- 付録G: ビルドとデプロイ
- 付録H: Java共通エラーガイド

### 継続的なサポート

リポジトリは本書の学習サポートとして継続的に更新されます。

#### 正誤表の公開
書籍の内容に関する修正や補足情報は、リポジトリの[Issues](https://github.com/Nagatani/techbook-java-primer/issues)で随時公開されます。学習中に疑問や問題を発見された場合は、こちらで最新の情報を確認してください。

#### 追加リソース
- FAQ
    + よくある質問と回答
- 技術アップデート
    + Javaの新バージョンに対応した補足情報
- 実践例の追加
    + 読者からの要望に基づく新しい実装例

## 本書の対象読者

本書は、プログラミングの基礎をC言語で学び、次のステップとして実践的なプログラミングスキルを身につけたい方を主な対象としています。
C言語でプログラミングの基礎を学んだ方とは、変数や関数、制御構造（if文、forループなど）、配列、ポインタの基本的な概念を理解し、簡単なプログラムを作成できるレベルの方を想定しています。（主に大学1年生のとき、C言語をプログラミングの入門言語とした方に最適です）

本書では、オブジェクト指向を含むさまざまなプログラミングパラダイムを学びます。オブジェクト指向は、プログラミングの歴史の中で生まれた多くの手法の1つであり、状況に応じて使い分けることが大切です。Javaという言語を通じて、これらの多様な概念を実践的に学んでいきます。

さらに、単に基本的なJavaを学ぶだけでなく、モダンなJavaの機能を習得したい方にも対応しています。
Javaは継続的に進化しており、ラムダ式、Stream API、Recordクラス、パターンマッチング、Virtual Threads（軽量スレッド）など、オブジェクト指向に限らない多くの新機能が追加されています。
本書では、これらの現代的な機能とその応用もカバーし、実務で使える知識を身につけることを目標としています。

## 本書で学べること

本書を通じて、将来のプログラミングキャリアの土台となる実践的なスキルを身につけることができます。Javaは単なる1つのプログラミング言語ではなく、現代のプログラミングで必要とされるさまざまな概念を学ぶための優れた教材です。

まず、C言語との違いを意識したJavaの基本文法から始めます。
C言語経験者がつまずきやすいポイント、たとえばメモリ管理の違い、文字列の扱い方、配列の宣言方法などを丁寧に解説し、スムーズな移行をサポートします。C言語では文字配列として扱う文字列が、JavaではStringクラスというオブジェクトとして扱われ、より安全で便利な操作が可能になります。

オブジェクト指向プログラミングについても学びますが、これは数あるプログラミング手法の1つとして扱います。
クラスとオブジェクトの概念から始まり、継承、ポリモーフィズム、インターフェイス、抽象クラスなどを学習しますが、これらは状況に応じて使い分けるツールであることを常に意識します。

コレクションフレームワークとジェネリクスについても詳しく学びます。これらはデータ構造を扱う上でとても便利な機能で、List、Set、Mapなどの基本的なデータ構造の使い分け、ジェネリクスによる型安全なプログラミングの方法を習得します。

さらに、Java 8以降で導入されたモダンな機能、特にラムダ式とStream APIについても学習します。これらの機能は、関数型プログラミングの考え方をJavaに取り入れたもので、より簡潔で表現力の高いコードを書くことが可能になります。

実用的なアプリケーション開発の技術もカバーします。GUIアプリケーションの開発では、Swingを使ったデスクトップアプリケーションの作成方法を学びます。また、外部ライブラリの活用方法を学ぶことで、車輪の再発明を避け、開発時間を短縮できます。

高度なトピックとして、マルチスレッドプログラミングとネットワークプログラミングも取り上げます。マルチコアCPUの性能を最大限に活用する並行処理の技術や、ネットワークを介したクライアント／サーバアプリケーションの開発方法を学び、現代のソフトウェア開発に役立つ知識を身につけます。

本書の根底にある信念は、プログラミング言語は道具であり、大切なのは問題解決能力と継続的な学習能力です。Javaを通じて身につけた知識と経験は、Python、JavaScript、Go、Rustなど、将来どんな言語を学ぶ際にも必ず役立ちます。本書は、そのような言語に依存しない普遍的なプログラミングスキルを身につけるための第一歩となることを目指しています。

### 学習のコツ

- 必ず手を動かしてコードを書き、実行結果を確認
- 各章の演習課題に必ず取り組む
    + ページ数の関係上、章末の演習課題はGitHub上で展開されています。
- 定期的に前の章と関連付けて理解を深める


## C言語、Java、そして現代的ソフトウェア開発のしくみ

C言語の学習を終えた皆さんは、プログラミングの基礎固めができています。`main`関数から始まり、文が順次実行され、データは変数に格納し、処理は関数としてまとめる。この「手続き型プログラミング」の考え方は、コンピュータの動作原理に近く、処理の流れを理解しやすいという利点があります。

しかし、プログラムの規模が大きくなるにつれて、ある問題に直面します。C言語で書かれた以下のコードを見てください。

```c
#include <stdio.h>

// 商品価格と消費税率をグローバル変数で定義
int price = 1000;
double tax_rate = 1.1;

// 税込価格を計算して表示する関数
void printPriceWithTax() {
    int total = price * tax_rate; // priceとtax_rateを参照
    printf("合計金額: %d円\n", total);
}

int main(void) {
    printPriceWithTax();
    return 0;
}
```
このコードでは、データ（`price`, `tax_rate`）と、それを利用する手続き（`printPriceWithTax`）がプログラム上で分離しています。小規模なうちは問題ありませんが、何百もの関数と変数が登場する大規模な開発では、「どの関数がどのデータを変更する可能性があるのか」を追跡するのが非常に困難になります。この「データと手続きの分離」こそが、ソフトウェアの複雑性を増大させ、バグの温床となる主要な原因の1つです。

本書でこれから学ぶJavaと「オブジェクト指向」は、この問題を解決するための強力なアプローチを提供します。

## Javaとオブジェクト指向：データと処理を一体化する

C言語で大規模なプログラムを書くと、データと処理が分離していることによる複雑さに直面します。Javaは「オブジェクト指向」というアプローチで、この問題を解決します。

オブジェクト指向の基本的な考え方は、関連するデータとそれを操作する処理を「オブジェクト」という1つの単位にまとめることです。これにより、プログラムの構造がより直感的で管理しやすくなります。

### 簡単な例：商品を表現する

C言語では商品情報と処理を別々に管理していましたが、Javaではこれらを1つの「クラス」にまとめます。

Javaでのオブジェクト指向アプローチ。

このコードは、オブジェクト指向の主要な原則を示しています。

1. カプセル化
    + データ（name, price）をprivateで保護
2. データと処理の一体化
    + 商品に関するデータとメソッドを同じクラス内に配置
3. 再利用性
    + Productクラスは他の場所でも使用可能

<span class="listing-number">**サンプルコード1-1**</span>

```java
// Product.java
public class Product {
    private String name;  // ①
    private int price;    // ②
    
    public Product(String name, int price) { // ③
        this.name = name;
        this.price = price;
    }
    
    public int getPriceWithTax() {           // ④
        return (int)(price * 1.1);
    }
    
    public void display() {                  // ⑤
        System.out.println(name + ": " + getPriceWithTax() + "円（税込）");
    }
}
```

<span class="listing-number">**サンプルコード1-2**</span>

```java
// Main.java
public class Main {
    public static void main(String[] args) {
        Product pencil = new Product("鉛筆", 100); // ⑥
        pencil.display();                            // ⑦
    }
}
```

#### コードの構造解説
- ①② privateフィールド - 外部から直接アクセスできないデータ領域
- ③ コンストラクタ - オブジェクト生成時の初期化処理
- ④ ビジネスロジック - 税込価格の計算処理
- ⑤ 表示処理 - 商品情報の出力機能
- ⑥ オブジェクト生成 - newキーワードでProductクラスのインスタンス（実体）を作成
- ⑦ メソッド呼び出し - オブジェクトの機能を実行（出力「鉛筆： 110円（税込）」）

> **注意点**: Javaでは1つのファイルに複数のpublicクラスを定義できません。上記の例では、Product.javaとMain.javaと2つのファイルに分けて保存してください。

#### C言語との違い

- C言語のアプローチ
    - データ（構造体）と処理（関数）が分離
    - 大規模になると、どの関数がどのデータを変更するか追跡が困難
    - グローバル変数による予期しない副作用のリスク

- Javaのアプローチ
    - データと処理を「クラス」という単位で一体化
    - `private`によりデータへの直接アクセスを制限（カプセル化）
    - オブジェクトごとに独立した状態を持っている

この違いがもっとも顕著に現れるのは、プログラムが大規模化したときです。
オブジェクト指向により、数百数千のクラスからなる大規模システムでも、各部分の責任範囲が明確になり、保守性と拡張性が向上します。

> より深く学びたい方へ。
> プログラミング言語がソースコードをどのように解釈し、実行可能な形式に変換するかについて興味がある方は、本書の巻末にある「Deep Dive: 抽象構文木（AST）とコンパイラの仕組み」をご覧ください。IDE（統合開発環境）の高度な機能や、現代的なフレームワークの動作原理を理解する上で役立つ知識が得られます。

## Javaの特徴

Javaは1995年にSun Microsystems社によって開発され、現在では世界中でもっとも広く使われているプログラミング言語の1つです。その成功の背景には、設計段階から組み込まれた革新的な特徴があります。

もっとも重要な特徴はプラットフォーム独立性です。「Write Once, Run Anywhere（一度書けば、どこでも動く）」という理念のもと、Windows、macOS、Linuxなど、異なるOSで同じJavaプログラムが動作します。これは、Javaコンパイラがソースコードを中間言語である「バイトコード」に変換し、各OS上のJava仮想マシン（JVM）がそれを実行するという革新的なしくみによって実現されています。さらに、JVMは実行時に頻繁に使用されるバイトコードを機械語にコンパイルする「JIT（Just-In-Time）コンパイラ」を搭載しており、インタープリタ型言語でありながら高速な実行を実現しています。

オブジェクト指向の採用も、Javaの成功要因の1つです。すべてのコードはクラスという単位で構造化され、データとそれを操作する処理が一体化されています。この設計により、大規模なソフトウェア開発でも各部分の責任範囲が明確になり、保守性と再利用性が飛躍的に向上します。

メモリ管理におけるガベージコレクション <span class="footnote">ガベージコレクション（Garbage Collection、GC）は、発音で言えばガーベジコレクションが正しいと思います。しかし世間一般ではガベージの言い方が圧倒的多数という現実から、ガベージと書いています。</span> の導入は、プログラマを煩雑なメモリ管理から解放しました。C言語では手動でメモリの確保と解放を行う必要があり、解放忘れによるメモリリークや、二重解放によるクラッシュが頻発していました。Javaでは使われなくなったメモリを自動的に回収するため、開発者はビジネスロジックの実装に集中できます。

なお、Javaには「参照」という概念がありますが、C言語のポインタとは異なり、メモリアドレスを直接操作することはできません。これにより、ポインタ関連のバグやセキュリティ脆弱性を防ぐことができます。

強い型付けという特徴により、Javaはコンパイル時に多くのエラーを検出します。変数の型が明示的に宣言され、型の不一致はコンパイル時にエラーとなるため、実行時エラーを減らすことができます。これは大規模なチーム開発において、コードの品質と安全性を保つ上で重要な役割を果たします。

さらに、Javaの豊富なライブラリエコシステムは、開発効率を向上させます。標準ライブラリには、ファイル操作、ネットワーク通信、データベース接続、GUI開発など、現代のアプリケーション開発に必要な機能が網羅されています。また、MavenやGradleなどのビルドツールを通じて、世界中の開発者が作成したサードパーティライブラリを簡単に利用できる環境が整っています。

## 開発環境の準備

Javaプログラミングを始めるには、まず開発環境を整える必要です。C言語では主にコンパイラとテキストエディタがあれば開発を始められましたが、現代のJava開発では、より統合された開発環境を使用することが一般的です。

本書では、JDK（Java Development Kit）として、OpenJDK 21（LTS版）を使用します。
OpenJDKはオープンソース版のJava開発キットで、Oracle、Microsoft、Amazon、Red Hatなど複数のベンダーから提供されています。JDKにはJavaコンパイラ（javac）、Java仮想マシン（JVM）、標準ライブラリ、開発に必要な各種ツールが含まれており、Javaプログラムの開発と実行に必要なすべてがそろっています。

開発効率を向上させるため、IDE（統合開発環境）としてIntelliJ IDEA Community Editionを使用します。IDEは単なるテキストエディタではなく、コード補完、リファクタリング支援、デバッガ、ビルドツール統合など、現代的なソフトウェア開発に必要な機能が統合されたパワフルな開発環境です。とくにIntelliJ IDEAは、Javaに特化した高度な支援機能により、初学者でもスムーズにコードを書くことができます。


開発環境の構築手順は、時期によって頻繁に変わる可能性があるため、下記リンク先を参照してください。<br>
`https://github.com/Nagatani/techbook-java-primer/tree/main/appendix/a-environment-setup/`


## 最初のJavaプログラム

開発環境の準備ができたら、さっそく最初のJavaプログラムを作成してみましょう。

### Hello Worldプログラム

以下は、画面に「Hello, World!!」と表示するもっとも基本的なJavaプログラムです。

<span class="listing-number">**サンプルコード1-3**</span>

```java
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!!");
    }
}
```

このプログラムは、わずか5行ですが、Javaプログラミングの基本的な要素がすべて含まれています。まず `public class HelloWorld` は、HelloWorldという名前のクラスを宣言しています。Javaでは、すべてのコードはクラスの中に記述し、このクラス名はファイル名（HelloWorld.java）と一致させます。

プログラムの実行は `public static void main(String[] args)` から始まります。これはJavaプログラムのエントリポイント（開始点）となる特別なメソッドで、Javaランタイムはこのシグネチャ（署名）を持つメソッドを探して実行を開始します。C言語のmain関数と同じ役割を果たしますが、必ずクラスの中に定義する必要がある点が異なります。

実際の処理を行っているのは `System.out.println("Hello, World!!")` です。これは標準出力（通常は画面）に文字列を出力し、最後に改行を加えるメソッドです。Systemクラスのoutフィールド（標準出力ストリーム）に対してprintlnメソッドを呼びだすという、オブジェクト指向的な記述方法になっています。


> コンパイルと実行の方法や、標準入力の扱い方については、 `https://github.com/Nagatani/techbook-java-primer/tree/main/appendix/a-environment-setup/` を参照してください。

## Javaプログラムの基本構文

ここまでのサンプルコードを見て、「なぜこのような書き方をするのか？」という疑問を持つ方もいるでしょう。章末の練習課題に取り組む前に、Javaプログラムの基本的な構文と文法要素を体系的に理解しておきましょう。

### クラスとmainメソッドの基本構造

Javaでは、すべてのコードは「クラス」という単位で記述します。クラスは、関連するデータとそれを操作する処理をまとめたものです。

<span class="listing-number">**サンプルコード1-4**</span>

```java
public class クラス名 {
    public static void main(String[] args) {
        // ここにプログラムの処理を書く
    }
}
```

##### 重要なルール

- クラス名とファイル名は一致させる必要がある
  - `HelloWorld.java`というファイルには`public class HelloWorld`を定義
- 大文字・小文字は区別される
  - `HelloWorld`と`helloworld`は異なるものとして扱われる
- 1つのJavaファイルには1つのpublicクラスのみ定義可能

#### mainメソッドの構成要素

```java
public static void main(String[] args)
```

この1行には、以下の重要な要素が含まれています

| 要素 | 説明 |
|------|------|
| `public` | どこからでも呼び出し可能であることを示すアクセス修飾子 |
| `static` | オブジェクトを作らなくても呼び出せることを示すキーワード |
| `void` | この処理が値を返さないことを示す戻り値の型 |
| `main` | プログラムの開始点として認識される特別なメソッド名 |
| `String[] args` | コマンドライン引数を受け取るためのパラメータ |

なぜこの書き方が必要なのか？。
Javaランタイム（javaコマンド）は、指定されたクラスの中からこの正確なシグネチャを持つ`main`メソッドを探して、プログラムの実行を開始します。一文字でも違うと認識されません。


### 画面に文字列を出力する方法

Javaでは、画面に文字列を出力する方法として、いくつかの方法があります。

#### 1.`System.out.println`
この出力方法は、指定された文字列（String型の変数や式でもOK）を改行コードを末尾につけて出力する方法です。

```java
System.out.println("Hello, World!!");
```

これをC言語でたとえるなら、以下のようになるはずです。

```c
printf("%s\n" , "Hello, World!!");
```

`\n`が自動的に追加されるイメージで良いでしょう。

#### `System.out.print`
これは、`System.out.println`で改行コードを末尾に追加しないバージョンです。

#### `System.out.printf`
C言語ライクに書きたい場合は、printfを使用します。
C言語のprintfと同じような書き方で出力が可能です。

##### サンプルソース

ファイル名「`StandardOutput.java`」

<span class="listing-number">**サンプルコード1-5**</span>

```java
public class StandardOutput {
    public static void main(String[] args) {
        System.out.println("標準出力は、「System.out.printlnメソッド」を使用します。");
        System.out.println("「System.out.println」は末尾に改行コードも併せて出力します。");
        System.out.println(); // 引数なしで改行のみ出力されます。
        System.out.print("「System.out.print」を使うと、末尾に改行は出力されません。");
        System.out.print("改行は\\nで出力できます。\n");
        System.out.print("\n");
        String message = "C言語のprintf関数のように出力したい場合は、「System.out.printf」を使います。";
        System.out.printf("%s\n", message);
        System.out.printf("整数値: %d, 実数値: %f\n", 10, 3.142592654d);
    }
}
```

## 標準入出力を扱うサンプルを動かしてみよう

ターミナルやコマンドプロンプトなど、黒い画面で動作するプログラムにて、ユーザーからデータの入力をできるようになるためのサンプルコードを実行してみましょう。

<span class="listing-number">**サンプルコード1-6**</span>

```java
import java.util.Scanner;  // Scannerクラスを使用するための宣言

public class InputExample {
    public static void main(String[] args) {
        // Scannerオブジェクトの作成（標準入力から読み取る）
        Scanner scanner = new Scanner(System.in);
        
        // ユーザーへの入力促進メッセージ
        System.out.print("整数値を入力: ");
        
        // 文字列として入力を受け取る
        String input = scanner.nextLine();
        
        // 文字列を整数に変換
        int number = Integer.parseInt(input);
        
        // 変換した値を使った処理の例
        System.out.println("入力された値: " + number);
        System.out.println("2倍の値: " + (number * 2));
        
        // Scannerを閉じる（リソースの解放）
        scanner.close();
    }
}
```

#### このコードのポイント
1. import文
    + `java.util.Scanner`をインポートして入力機能を使用
2. Scanner
    + `new Scanner(System.in)`で標準入力から読み取るScannerを作成
3. 入力の受け取り
    + `scanner.nextLine()`で1行分の文字列を取得
4. 型変換
    + `Integer.parseInt()`で文字列を整数に変換
5. リソース管理
    + 使い終わったら`scanner.close()`でリソースを解放

基本的なパッケージは自動でimport済み。

- `java.lang`パッケージ（`String`, `System`, `Integer`など）は自動的に利用可能
- そのため`System.out.println()`や`Integer.parseInt()`にはimport文は不要



> **コラム：Integer.parseIntのエラーから学ぶ**{.column-section}
> 
> ### プログラミングにおけるエラーとの向き合い方。
> 
> サンプルコード1-15でScannerを使った入力処理を学習しました。ここで気になるのは、`Integer.parseInt()`で文字列を整数に変換する際のエラーです。数値以外の文字列を入力してEnterキーを押すと、ずらずらとエラーが出て、実行していたプログラムは停止します。これは正しい動作です。
> 
> #### よくあるエラーの例。
> 
> ```java
> String input = "";  // ユーザーが何も入力せずEnterを押した場合
> int number = Integer.parseInt(input);  // ここでエラー発生！
> ```
> 
> このような場合、以下のエラーが発生します。
> 
> ```
> Exception in thread "main" java.lang.NumberFormatException: For input string: ""
>     at java.base/java.lang.Integer.parseInt(Integer.java:662)
> ```
> 
> #### エラーメッセージの読み方。
> 
> プログラミング初学者にとって、このようなエラーメッセージは怖く見えることがあります。しかし、実はエラーメッセージは「なぜ動かないか」を教えてくれる親切なメッセージなのです。
> 
> - `NumberFormatException`
    + 数値の形式が正しくないという例外。
> - `For input string: ""`
    + 空文字列を数値に変換しようとした。
> - スタックトレース
    + エラーが発生した場所の履歴。
> 
> #### 第1章での学習ポイント。
> 
> 現時点では、以下の点を押さえておくとよいでしょう。
> 
> 今は気にしなくて良いこと。
> - ユーザーが数字以外を入力する可能性への対処。
> - 空文字列や特殊文字への対応。
> - すべての異常入力をカバーする防御的プログラミング。
> 
> なぜ気にしなくて良いのか。
> 「整数値を入力してください」と書いてあるのに整数値以外が入力されることは考えなくてよいです。
> 
> また、プログラミング学習は段階的に進めることがポイントです。
> 第1章では「正しく動くプログラム」を作る喜びを体験することに焦点を当てましょう。
> さまざまな入力に対するエラー処理の詳細は第14章「例外処理」で体系的に学習します。
> 
> #### 実務での対処法（参考）
> 
> 実際の開発では、以下のような対処をします（詳細は後の章で）。
> 
> ```java
> try {
>     int number = Integer.parseInt(input);
>     // 正常処理
> } catch (NumberFormatException e) {
>     System.out.println("数値を入力してください");
> }
> ```
> 
> ポイント：エラーは学習の機会です。エラーメッセージは敵ではなく、問題解決のヒントを与えてくれる味方として捉えると、プログラミングがより楽しくなります。





## 章末演習

### 演習課題へのアクセス
本章の演習課題は、GitHubリポジトリで提供されています。<br>
`https://github.com/Nagatani/techbook-java-primer/tree/main/exercises/chapter01/`

### 課題構成
- 本章の基本概念の理解確認
- 応用的な実装練習
- 実践的な総合問題

詳細な課題内容と実装のヒントは、各課題フォルダ内のREADME.mdを参照してください。

#### 実装のポイント
- クラス名とファイル名を一致させる
- mainメソッドのシグネチャを正確に記述
- System.out.println()で文字列を出力

#### Exercise02_SelfIntroduction.java  

目的： 変数を使った自己紹介プログラムの作成

##### 実装のポイント
- String型で名前を格納
- int型で年齢を格納
- 文字列連結（+演算子）を使って出力

#### Exercise03_BasicCalculation.java

目的： 基本的な算術演算の実践

##### 実装のポイント
- int型での整数演算
- double型での小数演算
- 整数除算の結果に注意（5 / 2 = 2になる）

#### Exercise04_DataTypes.java

目的： 各種データ型の理解と使い分け

##### 実装のポイント
- boolean型でtrue/falseを扱う
- char型で1文字を扱う（シングルクォート使用）
- float型とdouble型の違いを理解（fサフィックス）

### 効果的な学習の進め方

1. まずは自分で考える
   - エラーメッセージをしっかり読む
   - 本章のサンプルコードを参考にする
   - 5-10分考えてわからなければヒントを見る

2. コンパイルエラーが出たら
   - エラーメッセージの行番号を確認
   - セミコロン忘れ、大文字小文字の間違いをチェック
   - クラス名とファイル名の一致を確認

3. 動作確認のコツ
   - 期待する出力と実際の出力を比較
   - 変数の値を途中でprintlnを使って確認
   - 小さな部分から動作確認していく

### よくあるトラブルと解決方法

| 問題 | 原因 | 解決方法 |
|------|------|----------|
| "class not found" | コンパイルされていない | `javac ファイル名.java`を実行 |
| "cannot find symbol" | 変数名やメソッド名の間違い | スペルと大文字小文字を確認 |
| "';' expected" | セミコロン忘れ | 該当行の末尾にセミコロンを追加 |
| 文字化け | エンコーディングの問題 | UTF-8でファイルを保存 |

### 発展課題へのステップアップ

基礎課題を完了したら、発展課題に挑戦してみましょう。発展課題では。
- 複数の変数を組み合わせた処理
- ユーザー入力の受け取り（Scanner使用）
- より実用的なプログラムの作成

を学習します。難易度は上がりますが、基礎課題の知識を応用すれば解決できます。

次のステップ： 基礎課題が完了したら、第2章「Java基本文法」に進みましょう。第2章では、より本格的なオブジェクト指向プログラミングの世界に入っていきます。

※ 本章の高度な内容については、付録B.01「JVMアーキテクチャとバイトコード」（`https://github.com/Nagatani/techbook-java-primer/tree/main/appendix/b01-jvm-architecture/`）を参照してください。

## よくあるエラーと対処法

Java開発環境を構築し、初めてのプログラムを作成する際によく遭遇するエラーとその対処法を以下にまとめます。

### 環境構築関連のエラー

#### JDKが見つからない

##### エラーメッセージ

```
'java' is not recognized as an internal or external command
```

##### 原因と対処

- JDKがインストールされていない、またはPATHが設定されていない
- 対処法
  1. JDKをインストール（推奨：Oracle JDK 11以上）
  2. 環境変数PATHにJDKのbinディレクトリを追加
  3. コマンドプロンプトで`java -version`を実行して確認

#### 文字化けエラー

症状
- コンソールで日本語が正しく表示されない
- ソースコードの日本語コメントが文字化けする

原因と対処。
```java
// 文字化けの例
System.out.println("縺薙s縺ｫ縺｡縺ｯ");  // 正しく表示されない

// 修正版
// ファイルをUTF-8で保存し、同じエンコーディングでコンパイル
javac -encoding UTF-8 HelloWorld.java
```

### コンパイル関連のエラー

#### クラス名とファイル名の不一致

エラーメッセージ。
```
error: class HelloWorld is public, should be declared in a file named HelloWorld.java
```

原因と対処。
```java
// エラー例：ファイル名が「Sample.java」だが、クラス名がHelloWorld
public class HelloWorld {  // クラス名とファイル名が一致しない
    public static void main(String[] args) {
        System.out.println("Hello");
    }
}

// 修正版1：ファイル名をHelloWorld.javaに変更
// 修正版2：クラス名をSampleに変更
public class Sample {
    public static void main(String[] args) {
        System.out.println("Hello");
    }
}
```

#### mainメソッドのシグネチャが間違っている

エラーメッセージ。
```
Error: Main method not found in class HelloWorld
```

原因と対処。
```java
// エラー例：mainメソッドのシグネチャが間違っている
public class HelloWorld {
    public void main(String[] args) {  // staticが抜けている
        System.out.println("Hello");
    }
}

// 修正版：正しいmainメソッドのシグネチャ
public class HelloWorld {
    public static void main(String[] args) {  // staticを追加
        System.out.println("Hello");
    }
}
```

### 実行時エラー

#### クラスファイルが見つからない

##### エラーメッセージ
```
Error: Could not find or load main class HelloWorld
```

##### 原因と対処

```
# エラー例：コンパイルせずに実行しようとした
java HelloWorld.java  # 間違い

# 修正版：コンパイルしてから実行
javac HelloWorld.java  # コンパイル
java HelloWorld        # 実行（.classは不要）
```

#### NumberFormatExceptionと入力処理

##### エラーメッセージ

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "abc"
```

##### 原因と対処
```java
// エラー例：数値以外の入力を数値に変換しようとした
Scanner scanner = new Scanner(System.in);
System.out.print("数値を入力: ");
String input = scanner.nextLine();
int number = Integer.parseInt(input);  // "abc"を入力するとエラー

// 修正版：入力値の検証（第1章レベルでの対処）
Scanner scanner = new Scanner(System.in);
System.out.print("数値を入力: ");
String input = scanner.nextLine();

// 簡単な数値チェック
if (input.matches("\\d+")) {  // 数字のみの場合
    int number = Integer.parseInt(input);
    System.out.println("入力された数値: " + number);
} else {
    System.out.println("数値を入力してください");
}
```

### IDE関連のトラブル

#### IntelliJ IDEAでのプロジェクト設定

問題新規プロジェクトが正しく動作しない。

##### 対処法

1. プロジェクトSDKの設定
   - File → Project Structure → Project → Project SDK
   - インストールしたJDKを選択
2. モジュール設定の確認
   - File → Project Structure → Modules
   - Sourcesタブでsrcフォルダがソースルートに設定されているか確認
3. エンコーディングの設定
   - File → Settings → Editor → File Encodings
   - Global EncodingとProject EncodingをUTF-8に設定

### コマンドライン実行のコツ

#### 基本的なコンパイル・実行手順

```
# 1. ソースコードの作成
# HelloWorld.javaファイルを作成

# 2. コンパイル
javac HelloWorld.java

# 3. 実行
java HelloWorld

# 4. 複数ファイルの場合
javac *.java        # 全てのJavaファイルをコンパイル
java MainClass      # メインクラスを実行
```

#### パッケージを使用している場合

```
# パッケージ com.example のクラスの場合
javac com/example/HelloWorld.java
java com.example.HelloWorld
```

### デバッグの基本

#### println()を使ったデバッグ

```java
public class DebugExample {
    public static void main(String[] args) {
        int a = 10;
        int b = 20;
        
        System.out.println("a = " + a);  // デバッグ出力
        System.out.println("b = " + b);  // デバッグ出力
        
        int sum = a + b;
        System.out.println("sum = " + sum);  // 計算結果を確認
    }
}
```

#### 段階的な実行確認

```java
public class StepByStepDebug {
    public static void main(String[] args) {
        System.out.println("プログラム開始");
        
        int x = 5;
        System.out.println("x に 5 を代入しました");
        
        int y = x * 2;
        System.out.println("y に x * 2 の結果を代入しました: " + y);
        
        System.out.println("プログラム終了");
    }
}
```

### 初心者向けベストプラクティス

プログラミングに不慣れな方は以下の対処法を実践しましょう。

1. エラーメッセージを恐れない
   - エラーメッセージは問題解決のヒントなので必ず読む
   - エラーの内容から行番号を確認してエラーの場所をある程度特定できる

2. 小さなステップで進む
   - 一度に多くのコードを書かない
   - 少し書いては動作確認をし、「動作確認ができたら次へ進む」を頻繁に行う

3. コーディング規約を守る
   - コーディング規約は間違いを発生させない工夫がされている
   - クラス名は大文字で始める（PascalCase）
   - 変数名は小文字で始める（camelCase）
   - インデント（字下げ）を適切に使う

4. コメントを活用する
   - コードの意図を日本語で説明する
   - 複雑な処理には必ずコメントを追加して自分の理解を補助しよう
   - 慣れるまではすべての行にコメントを書く勢いで書いてみる

これらの対処法を参考に、Java開発環境を常に使える状態で学習を進めてください。
