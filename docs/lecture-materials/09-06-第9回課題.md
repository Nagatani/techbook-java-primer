---
title: 第9回課題
---

> オブジェクト指向プログラミングおよび演習1 第9回  

## オープンデータを活用してみる

以下のサイトを見てください。

- [DATA GO JP](https://www.data.go.jp/)

各都道府県の自治体が提供しているデータを、オープンデータといいます。  
アプリの開発者や、サービスの開発者は、このデータを利用して開発を行えます。
このデータをどう使うかは開発者次第です。

課題として出すのは、オープンデータの中から愛知県の農業振興課が出している「あいちの都市・農村交流ガイドルートマップ」のデータを用います（下記URLの「学ぶ・遊ぶ」タブ参照）

- [オープンデータサイト - 愛知県](https://maps.pref.aichi.jp/opendata.html)

ここより、対象とするファイルは、以下の8ファイルです。

1. あいちの都市・農村交流ガイドルートマップ　ルートスポット - c200326.csv
2. あいちの都市・農村交流ガイドルートマップ　寄ってこみゃ - c200328.csv
3. あいちの都市・農村交流ガイドルートマップ　地域資源スポット（風景・自然）- c200329.csv
4. あいちの都市・農村交流ガイドルートマップ　地域資源スポット（施設）- c200330.csv
8. 愛知県文化財マップ（ナビ愛知）建造物	- c200361.csv
7. 愛知県文化財マップ（ナビ愛知）名勝 - c200362.csv
6. 愛知県文化財マップ（ナビ愛知）天然記念物	- c200363.csv
5. 愛知県文化財マップ（ナビ愛知）史跡 - c200364.csv

これらのファイルから、以下の情報を取り出して統合します。  
(上記データの元データには、CSVのセル内改行という厄介なデータが含まれていましたので、moodleにアップロードされたセル内改行を取り除いたファイルを使用してください。)

1. データの緯度経度情報（または形状となっている列名）
    - 「`POINT(136.80953740291 35.3576773867654)`」のように1つのデータとしてまとめられてしまっているため、これより緯度経度情報をそれぞれ取り出します
2. データ名や名称
    - 施設名や地名が含まれるデータです。そのまま使いましょう

処理内容は、以下の条件に従います。

1. 出力するファイル名は、「`TouristSpot.csv`」
2. 出力データ形式は以下に従う
    - 「`緯度情報,経度情報,愛工大からの距離,データ名`」
    - 愛工大からの距離については、後述する計算手法に則ってください。
    - `緯度情報`,`経度情報`,`愛工大からの距離`に関しては小数点以下10桁程度は出力されることが望ましいです。
    - 文字列データはダブルクォーテーションで囲わないでください。
    - 1行に1件分のデータを持たせ、各データには改行コードを含むことがないようにしてください。
2. 1行目には、`緯度情報,経度情報,愛工大からの距離,データ名`を出力し、列名とする
3. 出力データは愛工大からの距離昇順で並び替えを行う
5. 出力されるCSVファイルは、文字コードUTF-8（システム標準）とする
6. 同一のファイル名のファイルがすでに存在する場合は、消去して生成し直すこと

### 「愛工大からの距離」計算方法

愛工大の緯度経度情報を［35.1834122, 137.1130419］として、各地点の緯度経度情報より単純な2点間の距離を計算してください。

座標1の緯度をa, 座標1の経度をb, 座標2の緯度をc, 座標2の経度をdとして、2点間の距離Dを求める場合

![](pita.png)

に従い計算を行います。

※本来は、地球を球体として見る場合に緯度情報が異なると経度間の距離も異なってしまいます。
今回の課題では、単純に角度情報の数値的な距離を求めていただければOKです。

参考:

- [２地点間の距離と方位角 - 高精度計算サイト](https://keisan.casio.jp/exec/system/1257670779)
- [緯度経度より 2点間の距離を計算　｜　有限会社　エス技研](https://s-giken.info/distance/distance.php)


### オープンデータを扱う上での注意点

残念ながら文字コードは、UTF-8ではありません。  
行政データの基本は、Shift-JIS(ms932)という日本では古くからある文字コードです。

JavaでShift-JIS(ms932)の文字コードを扱う場合、読みこませる時にちょいちょいっと工夫する必要があります。

また、上でも書きましたが、CSVのセル内改行という厄介なデータが含まれている場合などもあります。  
データ処理のプログラムを作成する前に、データをしっかりと見てあげる必要があります。ご注意ください。


### 実行後のサンプルファイル

moodleにアップロードしておきます。

### 制約事項
1. プロジェクト名とメインクラス名は、`AichiTouristSpot`としてください。
2. パッケージは、`oop1.section09.kadai1`としてください。
3. GUIを作成する必要はありません。ファイルは各々で所定の場所に格納してください。


### 提出について

提出物は、プロジェクトフォルダをzip圧縮した状態で提出してもらいます。

プロジェクトフォルダには、以下のファイル・フォルダが含まれるようにしてください。

- [src]フォルダ：ソースコード一式
- 課題の参照元CSVファイル（フォルダに格納してもよい）
- 出力CSVファイル「`TouristSpot.csv`」

