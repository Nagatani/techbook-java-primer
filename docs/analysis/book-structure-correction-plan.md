# 書籍構造修正計画 - フェーズ3
策定日: 2025年7月22日

## 修正実施の優先順位と段階

### 第1段階：自動化可能な修正（1-2日）

#### 1.1 専門用語の統一
- **対象**: 「インターフェース」→「インターフェイス」（259箇所）
- **方法**: 一括置換スクリプト
- **注意**: コードブロック内は対象外

#### 1.2 textlint自動修正の適用
- **対象**: 全章のMarkdownファイル
- **方法**: `npm run lint:fix`
- **期待効果**: 基本的な日本語表現の統一

### 第2段階：半自動修正（3-4日）

#### 2.1 コードリスト番号の付与
- **対象**: 887個のコードブロック（465個が未番号）
- **形式**: 「**リストX.Y** タイトル」で統一
- **方法**: 
  1. スクリプトで番号候補を生成
  2. 各章ごとに手動確認・調整
  3. 既存の番号との整合性確保

#### 2.2 である調の修正
- **対象**: 40箇所のである調表現
- **方法**:
  1. 機械的に置換可能な箇所の一括修正
  2. 文脈依存の箇所は手動修正
- **注意**: リスト項目内はである調を維持

### 第3段階：内容追加（5-7日）

#### 3.1 演習セクションの追加
- **対象**: 全23章
- **テンプレート**:
```markdown
## 演習

本章では、[概要説明]について学習しました。以下の演習問題を通じて、理解を深めましょう。

### 演習問題

演習問題は以下のGitHubリポジトリで提供されています：

`https://github.com/Nagatani/techbook-java-primer/tree/main/exercises/chapterXX/`

### 学習目標
- [目標1]
- [目標2]
- [目標3]

### 取り組み方
1. まず自分で考えて実装してみましょう
2. 詰まったら本章の内容を見返してください
3. 解答例を参考に、別解や改善点を考えてみましょう
```

#### 3.2 付録C〜Gの内容作成
- **優先度**: 本文から参照されている付録を優先
- **方法**: 
  1. 各付録の概要設計
  2. 最小限の内容から段階的に拡充
  3. GitHubリポジトリとの連携も検討

### 第4段階：構造的修正（2日）

#### 4.1 第21章の移動
- **現在**: 第18章→第19章→第20章→第21章→第22章→第23章
- **修正後**: 第18章→第19章→第20章→第22章→第23章→第21章
- **作業**:
  1. vivliostyle.config.jsの更新
  2. 章番号の更新（21→24, 22→21, 23→22, 24→23）
  3. 章間参照の更新
  4. ファイル名の変更

### 第5段階：品質確認（1日）

#### 5.1 全体確認
- textlintによる最終チェック
- 相互参照の動作確認
- PDFビルドの確認

#### 5.2 分析ドキュメントの更新
- issues-tracking.mdの更新
- comprehensive-project-analysis.mdの更新

## 実施スケジュール案

| 段階 | 作業内容 | 所要日数 | 依存関係 |
|------|----------|----------|----------|
| 第1段階 | 自動化可能な修正 | 1-2日 | なし |
| 第2段階 | 半自動修正 | 3-4日 | 第1段階完了後 |
| 第3段階 | 内容追加 | 5-7日 | 並行作業可能 |
| 第4段階 | 構造的修正 | 2日 | 第2段階完了後 |
| 第5段階 | 品質確認 | 1日 | 全段階完了後 |

**総所要期間**: 12-16日（実働）

## リスクと対策

### リスク1：章番号変更の影響
- **対策**: 変更前に全参照箇所をリストアップ
- **ツール**: grepによる事前調査

### リスク2：自動修正による意図しない変更
- **対策**: 各段階でgit commitを作成
- **方針**: 段階的に確認しながら進行

### リスク3：演習内容の品質
- **対策**: 各章の学習目標を明確化
- **方針**: 最小限から開始し、段階的に充実

## 成功指標

1. **textlintエラー0件**
2. **全コードブロックに番号付与完了**
3. **全章に演習セクション追加**
4. **である調の完全排除**（リスト項目を除く）
5. **PDFビルド成功**

## 次のステップ

フェーズ4（段階的修正実施）では、この計画に基づいて実際の修正作業を開始します。第1段階の自動化可能な修正から着手することを推奨します。