# 第18章 解答例

## 🎯 学習目標
- 高度なGUIイベント処理の実装
- マウスとキーボードの複合的なイベント処理
- リアルタイムな双方向性を持つGUIアプリケーション
- カスタム描画と動的なUIの作成
- イベント駆動型プログラミングの深い理解

## 📝 解答例一覧

### 解答例1: インタラクティブ描画アプリケーション
**ファイル名**: `InteractiveDrawing.java`

マウス操作で図形を描画できるインタラクティブな描画アプリケーションの解答例です。

**実装内容**:
- MouseListener、MouseMotionListenerによる詳細なマウスイベント処理
- Graphics2Dを使ったアンチエイリアス設定とカスタム描画
- 描画モード（ペン、矩形、楕円、消しゴム、選択）の実装
- 色選択とカラーチューザーの連携
- アンドゥ・リドゥ機能（Commandパターン）
- BufferedImageによる画像保存・読み込み

**技術ポイント**:
- カスタム描画パネル（JPanel継承）
- 図形データの管理（ArrayList）
- マウスイベントの状態管理
- 右クリックコンテキストメニュー
- ツールバーとメニューバーの連携



### 解答例2: フォームバリデーター
**ファイル名**: `FormValidator.java`

リアルタイムバリデーション機能付きのフォームアプリケーションの解答例です。

**実装内容**:
- DocumentListenerによるリアルタイム入力監視
- 正規表現を使った各種入力値の検証（名前、メール、電話番号、パスワード）
- カスタムテキストフィールド（ValidatedTextField、ValidatedPasswordField）
- 視覚的フィードバック（ボーダー色変更、アイコン表示）
- Timer クラスによる遅延バリデーション
- キーボードナビゲーション（Enter で次フィールド移動）

**技術ポイント**:
- 関数型インターフェイス（Validator）
- バリデーション結果の管理（ValidationResult）
- 設定の永続化（Preferences API）
- キーバインディング（ActionMap、InputMap）
- カスタムIcon実装



### 解答例3: 高度なメニューシステム
**ファイル名**: `MenuSystem.java`

多層メニューシステムと動的メニュー生成機能を持つアプリケーションの解答例です。

**実装内容**:
- Actionクラスによる統一的なアクション管理
- 階層的なメニュー構造（メニュー、サブメニュー、サブサブメニュー）
- 動的メニュー項目の追加・削除機能
- コンテキストメニュー（右クリックメニュー）
- MRU（Most Recently Used）ファイルリスト
- メニューアクションの履歴管理
- 設定の永続化（Properties、Preferences）

**技術ポイント**:
- カスタムActionクラス（MenuAction）
- MenuListenerによるメニューイベント処理
- ファイルI/Oとの連携
- メニューの動的変更とrevalidate()
- ツールバーとメニューバーの同期



### 解答例4: マウストラッカー
**ファイル名**: `MouseTracker.java`

マウスの詳細な動作を追跡・分析できるアプリケーションの解答例です。

**実装内容**:
- リアルタイムマウス座標表示
- マウス移動軌跡の記録と可視化
- クリック位置のマーキング（左・右・中央ボタン別）
- マウス移動速度の計算とリアルタイム表示
- 詳細なイベントログ機能
- 統計情報の集計（総移動距離、クリック数、ホバー時間等）
- マウスジェスチャー認識の基礎実装

**技術ポイント**:
- 高精度なタイムスタンプ管理
- 座標計算とPoint クラスの活用
- CircularBufferによるメモリ効率化
- カスタム描画による軌跡表示
- Timer による定期的な統計更新
- データ構造（List、Queue）の適切な使用

## 🔧 実装の工夫点

### 1. パフォーマンス最適化
- 大量のマウスイベントに対するメモリ効率化
- 描画処理の最適化（ダブルバッファリング）
- イベント処理の遅延実行

### 2. ユーザビリティ
- 直感的な操作性の実現
- 視覚的フィードバックの充実
- キーボードショートカットの実装

### 3. 設計パターンの活用
- MVCパターンによる責任分離
- Commandパターンによるアンドゥ・リドゥ
- Observerパターンによる状態管理

### 4. エラーハンドリング
- 適切な例外処理の実装
- ユーザーフレンドリーなエラーメッセージ
- 異常状態からの安全な復帰

## 📚 参考資料

### Swingイベント処理
- **MouseListener**: mousePressed、mouseReleased、mouseClicked等
- **MouseMotionListener**: mouseMoved、mouseDragged
- **DocumentListener**: insertUpdate、removeUpdate、changedUpdate
- **ActionListener**: actionPerformed
- **KeyListener**: keyPressed、keyReleased、keyTyped

### カスタム描画
- **Graphics2D**: 高品質な2D描画
- **RenderingHints**: アンチエイリアス等の描画品質設定
- **BufferedImage**: オフスクリーン画像処理
- **Color**: 色の管理と変換

### レイアウトとUI
- **GridBagLayout**: 柔軟なレイアウト管理
- **BorderFactory**: ボーダーの作成
- **Timer**: 定期処理とアニメーション
- **Preferences**: 設定の永続化

## ✅ 学習成果確認

この章の解答例を学習することで、以下の技術を習得できます：

- [ ] 高度なマウス・キーボードイベント処理
- [ ] リアルタイムな双方向性を持つGUI実装
- [ ] カスタム描画とアニメーション
- [ ] フォームバリデーションシステム
- [ ] 動的メニューシステムの構築
- [ ] パフォーマンスを考慮したイベント処理
- [ ] ユーザビリティの高いインターフェイス設計

**次のステップ**: これらの高度なイベント処理技術を習得したら、第19章のMVC設計パターンとデータバインディングに進み、より大規模なGUIアプリケーション開発に挑戦しましょう！