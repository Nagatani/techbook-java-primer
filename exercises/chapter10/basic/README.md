# 第10章 基本課題

## 🎯 学習目標
- Stream APIの基本概念と利用方法の理解
- 中間操作（filter、map、sorted等）と終端操作（collect、reduce等）の使い分け
- データ処理パイプラインの構築
- 並列ストリームによる性能向上
- Optional クラスによる null 安全プログラミング

## 📝 課題一覧

### 課題1: 社員データ分析システム
**ファイル名**: `Employee.java`, `EmployeeAnalyzer.java`, `EmployeeAnalyzerTest.java`

社員データを分析するシステムを作成し、Stream APIを活用してください。

**要求仕様**:
- Employee クラス（名前、年齢、部署、給与）
- Stream API による多様な分析処理
- フィルタリング、ソート、グループ化、集約
- 部署別・年齢層別の統計分析

**実行例**:
```
=== 社員データ分析システム ===
全社員データ（10名）:
田中太郎（30歳・営業部・500万円）
佐藤花子（25歳・開発部・450万円）
...

年齢フィルタ（30歳以上）:
田中太郎（30歳・営業部・500万円）
鈴木一郎（35歳・開発部・600万円）
...

給与順ソート（上位3名）:
1位: 鈴木一郎（600万円）
2位: 田中太郎（500万円）
3位: 佐藤花子（450万円）

部署別集計:
営業部: 3名（平均給与: 480万円）
開発部: 4名（平均給与: 520万円）
総務部: 3名（平均給与: 420万円）

年齢層別分析:
20代: 3名（平均給与: 430万円）
30代: 5名（平均給与: 510万円）
40代: 2名（平均給与: 580万円）

全体統計:
総人数: 10名
平均給与: 485万円
最高給与: 600万円
最低給与: 380万円
給与合計: 4,850万円
```

**評価ポイント**:
- Stream API の基本操作の理解
- 複雑なデータ処理パイプラインの構築
- Collectors クラスの活用

---

### 課題2: 商品売上分析システム
**ファイル名**: `Sale.java`, `SalesAnalyzer.java`, `SalesAnalyzerTest.java`

商品売上データを分析するシステムを作成し、高度なStream処理を実装してください。

**要求仕様**:
- Sale クラス（商品名、カテゴリ、売上金額、売上日）
- 期間別・カテゴリ別の売上分析
- Stream API の高度な操作（flatMap、partition等）
- Optional を活用した安全なデータアクセス

**実行例**:
```
=== 商品売上分析システム ===
売上データ（15件）:
2024-07-01: ノートPC（家電・150,000円）
2024-07-01: Java入門（書籍・3,000円）
...

月別売上集計:
2024年7月: 1,250,000円（8件）
2024年8月: 980,000円（7件）

カテゴリ別分析:
家電: 750,000円（3件・平均250,000円）
書籍: 45,000円（5件・平均9,000円）
食品: 80,000円（4件・平均20,000円）
衣料: 120,000円（3件・平均40,000円）

高額商品分析（10万円以上）:
ノートPC: 150,000円
デジタルカメラ: 120,000円
タブレット: 80,000円

売上トレンド:
最高売上日: 2024-07-15（350,000円）
最低売上日: 2024-08-05（15,000円）

Optional活用例:
最高額商品: Optional[ノートPC（150,000円）]
該当なし検索: Optional.empty
```

**評価ポイント**:
- 複雑なデータ変換処理
- flatMap による階層データの平坦化
- Optional による null 安全処理

---

### 課題3: テキスト解析システム
**ファイル名**: `TextAnalyzer.java`, `TextAnalyzerTest.java`

テキストデータを解析するシステムを作成し、文字列処理でのStream活用を実装してください。

**要求仕様**:
- テキストファイルの読み込みと単語分析
- Stream API による文字列処理
- 並列ストリームによる性能向上
- 正規表現と組み合わせた高度な解析

**実行例**:
```
=== テキスト解析システム ===
入力テキスト:
"Java is a programming language. Java is platform independent.
Stream API makes Java programming more functional."

基本統計:
総文字数: 145文字
総単語数: 23語
総行数: 3行
ユニーク単語数: 18語

単語頻度分析（上位5位）:
1位: Java（3回）
2位: is（2回）
3位: programming（2回）
4位: a（1回）
5位: language（1回）

長さ別単語分析:
1-3文字: 8語（35%）
4-6文字: 7語（30%）
7-9文字: 6語（26%）
10文字以上: 2語（9%）

特徴的な単語（6文字以上）:
programming（2回）
language（1回）
platform（1回）
independent（1回）
functional（1回）

並列処理性能テスト:
シーケンシャル処理: 15ms
並列処理: 8ms
性能向上率: 46.7%
```

**評価ポイント**:
- 文字列処理での Stream 活用
- 並列ストリームの理解と適用
- 正規表現との組み合わせ

---

### 課題4: データ変換パイプライン
**ファイル名**: `DataProcessor.java`, `DataProcessorTest.java`

複雑なデータ変換パイプラインを作成し、Stream APIの高度な機能を実装してください。

**要求仕様**:
- 複数段階のデータ変換処理
- カスタムコレクターの実装
- ストリームの合成と分岐
- 例外処理を含む安全なパイプライン

**実行例**:
```
=== データ変換パイプライン ===
入力データ: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

パイプライン処理1（数値処理）:
元データ → 偶数フィルタ → 二乗 → 文字列変換
結果: ["4", "16", "36", "64", "100"]

パイプライン処理2（分岐処理）:
奇数グループ: [1, 3, 5, 7, 9]
偶数グループ: [2, 4, 6, 8, 10]
奇数合計: 25
偶数合計: 30

カスタムコレクター使用:
統計情報: {count=10, sum=55, average=5.5, min=1, max=10}

並列パイプライン:
大量データ処理（100万件）
シーケンシャル: 245ms
並列処理: 98ms
性能向上: 60%

例外安全パイプライン:
"123" → 123 ✓
"abc" → エラー（スキップ）
"456" → 456 ✓
"def" → エラー（スキップ）
成功件数: 2件, エラー件数: 2件
```

**評価ポイント**:
- 複雑なパイプライン設計
- カスタムコレクターの実装
- 例外処理を含む実用的な実装

## 💡 ヒント

### 課題1のヒント
- Collectors.groupingBy() で部署別グループ化
- Collectors.averagingDouble() で平均給与計算
- Comparator.comparing() でソート条件指定

### 課題2のヒント
- LocalDate.parse() で日付変換
- Stream.flatMap() で入れ子構造の平坦化
- Optional.map() でチェーン処理

### 課題3のヒント
- Files.lines() でファイル読み込み
- String.split() と Pattern.compile() で単語分割
- parallelStream() で並列処理

### 課題4のヒント
- Collector.of() でカスタムコレクター作成
- Stream.concat() でストリーム結合
- try-catch と filter() で例外処理

## 🔍 Stream APIのポイント

1. **中間操作**: filter、map、sorted、distinct等（遅延評価）
2. **終端操作**: collect、reduce、forEach等（実際の処理実行）
3. **並列処理**: parallelStream() で自動並列化
4. **Optional**: null安全なプログラミング
5. **Collectors**: 豊富な集約操作の提供
6. **関数型インターフェイス**: Predicate、Function、Consumer等

## ✅ 完了チェックリスト

- [ ] 課題1: 社員データで基本的なStream操作ができている
- [ ] 課題2: 売上データで高度なStream処理ができている
- [ ] 課題3: テキスト処理で並列ストリームが活用されている
- [ ] 課題4: 複雑なパイプラインとカスタムコレクターが実装されている
- [ ] Stream APIの中間操作と終端操作を理解している
- [ ] Optional による null 安全プログラミングができている

**次のステップ**: 基本課題が完了したら、advanced/の発展課題でより高度なデータ処理に挑戦しましょう！