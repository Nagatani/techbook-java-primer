# 第9章 基本課題

## 🎯 学習目標
- ジェネリクスの基本概念と型安全性の理解
- 型パラメータ（T、E、K、V）の使い方
- 境界付きワイルドカード（extends、super）の活用
- ジェネリックメソッドとジェネリッククラスの実装
- 型消去（Type Erasure）の理解と制限事項

## 📝 課題一覧

### 課題1: ジェネリックペアクラス
**ファイル名**: `Pair.java`, `PairTest.java`

2つの値を保持するジェネリックなペアクラスを作成し、型安全性を実装してください。

**要求仕様**:
- ジェネリッククラス Pair<T, U>
- 2つの異なる型の値を保持
- getter、setter、swap メソッド
- equals、hashCode、toString の実装
- 型安全性の確保

**実行例**:
```
=== ジェネリックペアクラステスト ===
文字列と数値のペア:
Pair: ("Hello", 42)

値の入れ替え:
スワップ前: ("Hello", 42)
スワップ後: (42, "Hello")

座標ペア:
座標: (3.14, 2.71)
X座標: 3.14
Y座標: 2.71

同じ型のペア:
名前ペア: ("田中", "太郎")
結合名: 田中太郎

型安全性テスト:
// 以下はコンパイルエラーになる
// pair.setFirst(123);  // String型にintは代入不可
```

**評価ポイント**:
- ジェネリック型パラメータの理解
- 型安全性の確保
- 複数型パラメータの活用

---

### 課題2: ジェネリックコンテナクラス
**ファイル名**: `Container.java`, `ContainerTest.java`

型安全なコンテナクラスを作成し、ジェネリックメソッドを実装してください。

**要求仕様**:
- ジェネリッククラス Container<T>
- 要素の追加、取得、削除メソッド
- ジェネリックメソッド（検索、変換、フィルタリング）
- Iterable インターフェイスの実装
- 型制約のある操作メソッド

**実行例**:
```
=== ジェネリックコンテナクラステスト ===
文字列コンテナ:
追加: Hello, World, Java, Programming
内容: [Hello, World, Java, Programming]

検索テスト:
"Java"が含まれているか: true
"Python"が含まれているか: false

数値コンテナ:
追加: 1, 2, 3, 4, 5
内容: [1, 2, 3, 4, 5]

変換テスト（数値を2倍）:
元の値: [1, 2, 3, 4, 5]
変換後: [2, 4, 6, 8, 10]

フィルタリングテスト（偶数のみ）:
フィルタ前: [2, 4, 6, 8, 10]
フィルタ後: [2, 4, 6, 8, 10]

型制約テスト（Comparable要素のソート）:
ソート前: [banana, apple, orange]
ソート後: [apple, banana, orange]
```

**評価ポイント**:
- ジェネリッククラスとメソッドの実装
- 型制約（境界付き型パラメータ）の活用
- Iterable インターフェイスの理解

---

### 課題3: ワイルドカード活用システム
**ファイル名**: `NumberProcessor.java`, `WildcardTest.java`

ワイルドカードを活用した数値処理システムを作成し、共変・反変を実装してください。

**要求仕様**:
- 境界付きワイルドカード（? extends、? super）の活用
- 数値リストの統計処理（上限境界ワイルドカード）
- 要素追加処理（下限境界ワイルドカード）
- PECS原則（Producer Extends, Consumer Super）の実践

**実行例**:
```
=== ワイルドカード活用システムテスト ===
整数リスト: [1, 2, 3, 4, 5]
統計情報:
合計: 15
平均: 3.0
最大値: 5
最小値: 1

Double リスト: [1.5, 2.5, 3.5]
統計情報:
合計: 7.5
平均: 2.5
最大値: 3.5
最小値: 1.5

Number リストへの追加テスト:
追加前: []
Integer追加後: [10, 20, 30]
Double追加後: [10, 20, 30, 3.14, 2.71]

型の共変性テスト:
List<Integer> を List<? extends Number> として処理可能
List<Double> を List<? extends Number> として処理可能

型の反変性テスト:
List<Number> を List<? super Integer> として処理可能
List<Object> を List<? super Integer> として処理可能
```

**評価ポイント**:
- 境界付きワイルドカードの理解
- PECS原則の実践
- 共変・反変の概念理解

---

### 課題4: ジェネリック型変換ユーティリティ
**ファイル名**: `TypeConverter.java`, `TypeConverterTest.java`

型変換を行うジェネリックユーティリティクラスを作成し、高度なジェネリクス機能を実装してください。

**要求仕様**:
- ジェネリックメソッドによる型変換
- Function インターフェイスを活用した変換関数
- 複数段階の型変換チェーン
- Optional を活用した安全な型変換

**実行例**:
```
=== ジェネリック型変換ユーティリティテスト ===
基本的な型変換:
文字列 "123" → 整数: 123
整数 42 → 文字列: "42"
Double 3.14 → 文字列: "3.14"

リスト変換:
文字列リスト: ["1", "2", "3", "4", "5"]
整数リスト: [1, 2, 3, 4, 5]
二乗リスト: [1, 4, 9, 16, 25]

チェーン変換:
"123" → 整数 → 二乗 → 文字列: "15129"

安全な変換（Optional使用）:
"123" → 整数: Optional[123]
"abc" → 整数: Optional.empty

フィルタ付き変換:
文字列リスト: ["1", "abc", "3", "def", "5"]
数値のみ変換: [1, 3, 5]

カスタム変換:
Person{name='田中', age=25} → "田中 (25歳)"
Person{name='佐藤', age=30} → "佐藤 (30歳)"
```

**評価ポイント**:
- 高度なジェネリックメソッドの実装
- Function インターフェイスの活用
- Optional との組み合わせ
- メソッドチェーンの実装

## 💡 ヒント

### 課題1のヒント
- 型パラメータは慣例的に T、U、V を使用
- Objects.equals() で null セーフな比較
- Objects.hash() で複数フィールドのハッシュ計算

### 課題2のヒント
- <T extends Comparable<T>> で比較可能な型に制限
- Predicate<T> でフィルタリング条件を抽象化
- Function<T, R> で変換処理を抽象化

### 課題3のヒント
- ? extends Number で上限境界（読み取り専用）
- ? super Integer で下限境界（書き込み可能）
- Producer Extends, Consumer Super の原則

### 課題4のヒント
- <T, R> でメソッドレベルの型パラメータ
- Function.compose() でチェーン処理
- try-catch で安全な変換とOptional返却

## 🔍 ジェネリクスのポイント

1. **型安全性**: コンパイル時の型チェック
2. **型消去**: 実行時には型情報が消える
3. **境界付き型**: extends で上限、super で下限
4. **ワイルドカード**: ? extends（共変）、? super（反変）
5. **PECS原則**: Producer Extends, Consumer Super
6. **型推論**: ダイヤモンド演算子 <> の活用

## ✅ 完了チェックリスト

- [ ] 課題1: ジェネリックペアクラスで型安全性が確保されている
- [ ] 課題2: ジェネリックコンテナで型制約が活用されている
- [ ] 課題3: ワイルドカードでPECS原則が実践されている
- [ ] 課題4: 高度なジェネリックメソッドが実装されている
- [ ] 型パラメータと境界の使い分けができている
- [ ] ジェネリクスの制限事項を理解している

**次のステップ**: 基本課題が完了したら、advanced/の発展課題でより複雑なジェネリクス設計に挑戦しましょう！